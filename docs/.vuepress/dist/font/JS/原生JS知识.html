<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>1.原始类型有哪几种？null 是对象吗？原始数据类型和复杂数据类型存储有什么区别？ | niping</title>
    <meta name="description" content="欢迎来到我的博客">
    <link rel="icon" href="/logo.jpg">
    
    <link rel="preload" href="/assets/css/0.styles.b8bd58f1.css" as="style"><link rel="preload" href="/assets/js/app.d504157c.js" as="script"><link rel="preload" href="/assets/js/27.69957860.js" as="script"><link rel="prefetch" href="/assets/js/10.916602ea.js"><link rel="prefetch" href="/assets/js/11.2c7e1857.js"><link rel="prefetch" href="/assets/js/12.9c9c3593.js"><link rel="prefetch" href="/assets/js/13.5db78a44.js"><link rel="prefetch" href="/assets/js/14.3f71bceb.js"><link rel="prefetch" href="/assets/js/15.4a52787d.js"><link rel="prefetch" href="/assets/js/16.c6fa4f45.js"><link rel="prefetch" href="/assets/js/17.1f0be2e2.js"><link rel="prefetch" href="/assets/js/18.37c6f3d6.js"><link rel="prefetch" href="/assets/js/19.e466d60d.js"><link rel="prefetch" href="/assets/js/2.e482ec79.js"><link rel="prefetch" href="/assets/js/20.67721558.js"><link rel="prefetch" href="/assets/js/21.a63cbe5b.js"><link rel="prefetch" href="/assets/js/22.91e7b76a.js"><link rel="prefetch" href="/assets/js/23.8fe96047.js"><link rel="prefetch" href="/assets/js/24.19cfc674.js"><link rel="prefetch" href="/assets/js/25.50d4f6c2.js"><link rel="prefetch" href="/assets/js/26.220efac4.js"><link rel="prefetch" href="/assets/js/28.6df21172.js"><link rel="prefetch" href="/assets/js/29.142c0c1a.js"><link rel="prefetch" href="/assets/js/3.885ef110.js"><link rel="prefetch" href="/assets/js/30.f802f998.js"><link rel="prefetch" href="/assets/js/31.fdf80359.js"><link rel="prefetch" href="/assets/js/32.0b83db68.js"><link rel="prefetch" href="/assets/js/33.893269ff.js"><link rel="prefetch" href="/assets/js/34.a1776e13.js"><link rel="prefetch" href="/assets/js/35.e24b0e13.js"><link rel="prefetch" href="/assets/js/36.89b73bf9.js"><link rel="prefetch" href="/assets/js/37.392d4c8d.js"><link rel="prefetch" href="/assets/js/38.6857cc2f.js"><link rel="prefetch" href="/assets/js/39.cf706cba.js"><link rel="prefetch" href="/assets/js/4.c67f3813.js"><link rel="prefetch" href="/assets/js/40.0dd27abc.js"><link rel="prefetch" href="/assets/js/41.cf7d8aec.js"><link rel="prefetch" href="/assets/js/42.9b6796ed.js"><link rel="prefetch" href="/assets/js/43.07f59af5.js"><link rel="prefetch" href="/assets/js/44.aec3d72c.js"><link rel="prefetch" href="/assets/js/45.643228ca.js"><link rel="prefetch" href="/assets/js/46.b13d2b8d.js"><link rel="prefetch" href="/assets/js/47.a0989e44.js"><link rel="prefetch" href="/assets/js/48.f9f94b48.js"><link rel="prefetch" href="/assets/js/49.fe6048e5.js"><link rel="prefetch" href="/assets/js/5.41a9069b.js"><link rel="prefetch" href="/assets/js/50.d8d8aebb.js"><link rel="prefetch" href="/assets/js/51.ef2391df.js"><link rel="prefetch" href="/assets/js/52.cc4c4185.js"><link rel="prefetch" href="/assets/js/53.32503c32.js"><link rel="prefetch" href="/assets/js/54.f396988f.js"><link rel="prefetch" href="/assets/js/55.915221c2.js"><link rel="prefetch" href="/assets/js/56.6e9d6a0c.js"><link rel="prefetch" href="/assets/js/57.7eced5c0.js"><link rel="prefetch" href="/assets/js/58.c5b3df73.js"><link rel="prefetch" href="/assets/js/59.99330f63.js"><link rel="prefetch" href="/assets/js/6.654ec4f3.js"><link rel="prefetch" href="/assets/js/60.18ac70c5.js"><link rel="prefetch" href="/assets/js/61.9b708d8c.js"><link rel="prefetch" href="/assets/js/62.5d63c78f.js"><link rel="prefetch" href="/assets/js/7.e2c52714.js"><link rel="prefetch" href="/assets/js/8.4422c896.js"><link rel="prefetch" href="/assets/js/9.3a8c5e97.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b8bd58f1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">niping</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">HOME</a></div><div class="nav-item"><a href="/font/" class="nav-link router-link-active">前端</a></div><div class="nav-item"><a href="/computer/" class="nav-link">计算机</a></div><div class="nav-item"><a href="/other/" class="nav-link">个人学习笔记</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">关于我</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.instagram.com/nipingd/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  instagram
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/nipingd" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">HOME</a></div><div class="nav-item"><a href="/font/" class="nav-link router-link-active">前端</a></div><div class="nav-item"><a href="/computer/" class="nav-link">计算机</a></div><div class="nav-item"><a href="/other/" class="nav-link">个人学习笔记</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">关于我</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.instagram.com/nipingd/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  instagram
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/nipingd" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading open"><span>JS</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/font/JS/apply、call与bind.html" class="sidebar-link">apply、call与bind</a></li><li><a href="/font/JS/JS单线程、异步、同步.html" class="sidebar-link">JS单线程、异步、同步</a></li><li><a href="/font/JS/常用正则表达式备忘录.html" class="sidebar-link">常用正则表达式备忘录</a></li><li><a href="/font/JS/Object.defineProperty与Proxy理解整理.html" class="sidebar-link">Object.defineProperty与Proxy理解整理</a></li><li><a href="/font/JS/柯里化.html" class="sidebar-link">柯里化</a></li><li><a href="/font/JS/JS技巧.html" class="sidebar-link">JS技巧</a></li><li><a href="/font/JS/闭包.html" class="sidebar-link">闭包</a></li><li><a href="/font/JS/作用域与作用域链.html" class="sidebar-link">作用域与作用域链</a></li><li><a href="/font/JS/JS运行机制总结.html" class="sidebar-link">JS运行机制总结</a></li><li><a href="/font/JS/赋值、浅拷贝与深拷贝.html" class="sidebar-link">赋值、浅拷贝与深拷贝</a></li><li><a href="/font/JS/构造函数、原型、继承和原型链.html" class="sidebar-link">构造函数、原型、继承和原型链</a></li><li><a href="/font/JS/原生JS知识.html" class="active sidebar-link">原生JS知识</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/font/JS/原生JS知识.html#_1-原始类型有哪几种？null-是对象吗？原始数据类型和复杂数据类型存储有什么区别？" class="sidebar-link">1.原始类型有哪几种？null 是对象吗？原始数据类型和复杂数据类型存储有什么区别？</a></li><li class="sidebar-sub-header"><a href="/font/JS/原生JS知识.html#_2-typeof-是否正确判断类型-instanceof呢？-instanceof-的实现原理是什么？" class="sidebar-link">2.typeof 是否正确判断类型? instanceof呢？ instanceof 的实现原理是什么？</a></li><li class="sidebar-sub-header"><a href="/font/JS/原生JS知识.html#_3-for-of-for-in-和-foreach-map-的区别。" class="sidebar-link">3.for of , for in 和 forEach,map 的区别。</a></li><li class="sidebar-sub-header"><a href="/font/JS/原生JS知识.html#_4-如何判断一个变量是不是数组？" class="sidebar-link">4.如何判断一个变量是不是数组？</a></li><li class="sidebar-sub-header"><a href="/font/JS/原生JS知识.html#_5-类数组和数组的区别是什么？" class="sidebar-link">5.类数组和数组的区别是什么？</a></li><li class="sidebar-sub-header"><a href="/font/JS/原生JS知识.html#_6-和-有什么区别？" class="sidebar-link">6.== 和 === 有什么区别？</a></li><li class="sidebar-sub-header"><a href="/font/JS/原生JS知识.html#_7-es6中的class和es5的类有什么区别？" class="sidebar-link">7.ES6中的class和ES5的类有什么区别？</a></li><li class="sidebar-sub-header"><a href="/font/JS/原生JS知识.html#_8-数组的哪些api会改变原数组？" class="sidebar-link">8. 数组的哪些API会改变原数组？</a></li><li class="sidebar-sub-header"><a href="/font/JS/原生JS知识.html#_9-let、const-以及-var-的区别是什么？" class="sidebar-link">9. let、const 以及 var 的区别是什么？</a></li><li class="sidebar-sub-header"><a href="/font/JS/原生JS知识.html#_10-在js中什么是变量提升？什么是暂时性死区？" class="sidebar-link">10. 在JS中什么是变量提升？什么是暂时性死区？</a></li><li class="sidebar-sub-header"><a href="/font/JS/原生JS知识.html#_11-如何正确的判断this-箭头函数的this是什么？" class="sidebar-link">11. 如何正确的判断this? 箭头函数的this是什么？</a></li><li class="sidebar-sub-header"><a href="/font/JS/原生JS知识.html#_12-词法作用域和this的区别。" class="sidebar-link">12. 词法作用域和this的区别。</a></li><li class="sidebar-sub-header"><a href="/font/JS/原生JS知识.html#_13-谈谈你对js执行上下文栈和作用域链的理解。" class="sidebar-link">13. 谈谈你对JS执行上下文栈和作用域链的理解。</a></li><li class="sidebar-sub-header"><a href="/font/JS/原生JS知识.html#_14-什么是闭包？闭包的作用是什么？闭包有哪些使用场景？" class="sidebar-link">14. 什么是闭包？闭包的作用是什么？闭包有哪些使用场景？</a></li><li class="sidebar-sub-header"><a href="/font/JS/原生JS知识.html#_15-call、apply有什么区别？call-aplly和bind的内部是如何实现的？" class="sidebar-link">15. call、apply有什么区别？call,aplly和bind的内部是如何实现的？</a></li><li class="sidebar-sub-header"><a href="/font/JS/原生JS知识.html#_16-new的原理是什么？通过new的方式创建对象和通过字面量创建有什么区别？" class="sidebar-link">16. new的原理是什么？通过new的方式创建对象和通过字面量创建有什么区别？</a></li><li class="sidebar-sub-header"><a href="/font/JS/原生JS知识.html#_17-谈谈你对原型的理解？" class="sidebar-link">17. 谈谈你对原型的理解？</a></li><li class="sidebar-sub-header"><a href="/font/JS/原生JS知识.html#_18-什么是原型链？【原型链解决的是什么问题？】" class="sidebar-link">18. 什么是原型链？【原型链解决的是什么问题？】</a></li><li class="sidebar-sub-header"><a href="/font/JS/原生JS知识.html#_19-prototype-和-proto-区别是什么？" class="sidebar-link">19. prototype 和 __proto__ 区别是什么？</a></li><li class="sidebar-sub-header"><a href="/font/JS/原生JS知识.html#_20-使用es5实现一个继承？" class="sidebar-link">20. 使用ES5实现一个继承？</a></li><li class="sidebar-sub-header"><a href="/font/JS/原生JS知识.html#_21-什么是深拷贝？深拷贝和浅拷贝有什么区别？" class="sidebar-link">21. 什么是深拷贝？深拷贝和浅拷贝有什么区别？</a></li></ul></li><li><a href="/font/JS/防抖与节流.html" class="sidebar-link">防抖与节流</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>ES6</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>浏览器网络</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>CSS</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>vue</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>node</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>其他</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page"> <div class="content"><h2 id="_1-原始类型有哪几种？null-是对象吗？原始数据类型和复杂数据类型存储有什么区别？"><a href="#_1-原始类型有哪几种？null-是对象吗？原始数据类型和复杂数据类型存储有什么区别？" aria-hidden="true" class="header-anchor">#</a> 1.原始类型有哪几种？null 是对象吗？原始数据类型和复杂数据类型存储有什么区别？</h2> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <ul><li>原始类型有6种，分别是<strong>undefined,null,bool,string,number,symbol</strong>(ES6新增)。</li> <li>虽然 typeof null 返回的值是 object,但是null不是对象，而是基本数据类型的一种。</li> <li>原始数据类型存储在栈内存，存储的是值。</li> <li>复杂数据类型存储在堆内存，存储的是地址。当我们把对象赋值给另外一个变量的时候，复制的是地址，指向同一块内存空间，当其中一个对象改变时，另一个对象也会变化。</li></ul></div> <h2 id="_2-typeof-是否正确判断类型-instanceof呢？-instanceof-的实现原理是什么？"><a href="#_2-typeof-是否正确判断类型-instanceof呢？-instanceof-的实现原理是什么？" aria-hidden="true" class="header-anchor">#</a> 2.typeof 是否正确判断类型? instanceof呢？ instanceof 的实现原理是什么？</h2> <p>首先 typeof 能够正确的​​判断基本数据类型，但是除了 null, <strong>typeof null输出的是对象。</strong></p> <p>但是对象来说，typeof 不能正确的判断其类型， **typeof 一个函数可以输出 ‘function’,**而除此之外，输出的全是 object,这种情况下，我们无法准确的知道对象的类型。</p> <p>instanceof可以准确的判断复杂数据类型，但是不能正确判断基本数据类型。(正确判断数据类型请戳：<a href="https://github.com/YvetteLau/Blog/blob/master/JS/data-type.js" target="_blank" rel="noopener noreferrer">https://github.com/YvetteLau/Blog/blob/master/JS/data-type.js<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>)</p> <p>instanceof 是通过原型链判断的，A instanceof B, 在A的原型链中层层查找，是否有原型等于B.prototype，如果一直找到A的原型链的顶端(null;即<code>Object.prototype.__proto__</code>),仍然不等于B.prototype，那么返回false，否则返回true.</p> <p>instanceof的实现代码:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// L instanceof R</span>
<span class="token keyword">function</span> <span class="token function">instance_of</span><span class="token punctuation">(</span><span class="token parameter"><span class="token constant">L</span><span class="token punctuation">,</span> <span class="token constant">R</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//L 表示左表达式，R 表示右表达式</span>
    <span class="token keyword">var</span> <span class="token constant">O</span> <span class="token operator">=</span> <span class="token class-name">R</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span><span class="token comment">// 取 R 的显式原型</span>
    <span class="token constant">L</span> <span class="token operator">=</span> <span class="token constant">L</span><span class="token punctuation">.</span>__proto__<span class="token punctuation">;</span>    <span class="token comment">// 取 L 的隐式原型</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">L</span> <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token comment">//已经找到顶层</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>  
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">O</span> <span class="token operator">===</span> <span class="token constant">L</span><span class="token punctuation">)</span>   <span class="token comment">//当 O 严格等于 L 时，返回 true</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span> 
        <span class="token constant">L</span> <span class="token operator">=</span> <span class="token constant">L</span><span class="token punctuation">.</span>__proto__<span class="token punctuation">;</span>  <span class="token comment">//继续向上一层原型链查找</span>
    <span class="token punctuation">}</span> 
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="_3-for-of-for-in-和-foreach-map-的区别。"><a href="#_3-for-of-for-in-和-foreach-map-的区别。" aria-hidden="true" class="header-anchor">#</a> 3.for of , for in 和 forEach,map 的区别。</h2> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <ul><li>for…of循环：具有 iterator 接口，就可以用for…of循环遍历它的成员(属性值)。for…of循环可以使用的范围包括数组、Set 和 Map 结构、某些类似数组的对象、Generator 对象，以及字符串。for…of循环调用遍历器接口，数组的遍历器接口只返回具有数字索引的属性。对于普通的对象，for…of结构不能直接使用，会报错，必须部署了 Iterator 接口后才能使用。可以中断循环。</li> <li>for…in循环：遍历对象自身的和继承的可枚举的属性, 不能直接获取属性值。可以中断循环。</li> <li>forEach: 只能遍历数组，不能中断，没有返回值(或认为返回值是undefined)。</li> <li>map: 只能遍历数组，不能中断，返回值是修改后的数组。</li></ul> <p>PS: Object.keys()：返回给定对象所有可枚举属性的字符串数组。</p></div> <p>关于forEach是否会改变原数组的问题，有些小伙伴提出了异议，为此我写了代码测试了下(注意数组项是复杂数据类型的情况)。
除了forEach之外，map等API，也有同样的问题。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> arry <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

arry<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    item <span class="token operator">*=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arry<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//[1, 2, 3, 4]</span>

arry<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    arry<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">//直接操作数组</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arry<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//[ 1, 10, 3, 4 ]</span>

<span class="token keyword">let</span> arry2 <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">&quot;Yve&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> age<span class="token punctuation">:</span> <span class="token number">20</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
arry2<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    item<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arry2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//[ { name: 10 }, { age: 20, name: 10 } ]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>如还不了解 iterator 接口或 for…of, 请先阅读ES6文档: <a href="http://es6.ruanyifeng.com/#docs/iterator" target="_blank" rel="noopener noreferrer">Iterator 和 for…of 循环<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>更多细节请戳: <a href="https://github.com/YvetteLau/Blog/blob/master/JS/for.js" target="_blank" rel="noopener noreferrer">https://github.com/YvetteLau/Blog/blob/master/JS/for.js<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="_4-如何判断一个变量是不是数组？"><a href="#_4-如何判断一个变量是不是数组？" aria-hidden="true" class="header-anchor">#</a> 4.如何判断一个变量是不是数组？</h2> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <ul><li>使用 Array.isArray 判断，如果返回 true, 说明是数组</li> <li>使用 instanceof Array 判断，如果返回true, 说明是数组</li> <li>使用 Object.prototype.toString.call 判断，如果值是 [object Array], 说明是数组</li> <li>通过 constructor 来判断，如果是数组，那么 <code>arr.constructor === Array</code>. (不准确，因为我们可以指定 <code>obj.constructor = Array</code>)</li></ul></div> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//false; 因为arguments是类数组，但不是数组</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//true</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arguments <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//fasle</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//[object Arguments]</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//[object Array]</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arguments<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Array<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//false</span>
    arguments<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Array<span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arguments<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Array<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//false</span>
<span class="token punctuation">}</span>
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="_5-类数组和数组的区别是什么？"><a href="#_5-类数组和数组的区别是什么？" aria-hidden="true" class="header-anchor">#</a> 5.类数组和数组的区别是什么？</h2> <blockquote><p>类数组:</p></blockquote> <p>1）拥有length属性，其它属性（索引）为非负整数（对象中的索引会被当做字符串来处理）;</p> <p>2）不具有数组所具有的方法；</p> <p>类数组是一个普通对象，而真实的数组是Array类型。</p> <p>常见的类数组有: 函数的参数 arugments, DOM 对象列表(比如通过 document.querySelectorAll 得到的列表), jQuery 对象 (比如 $(“div”)).</p> <p>类数组可以转换为数组:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//第一种方法</span>
<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arrayLike<span class="token punctuation">,</span> start<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//第二种方法</span>
<span class="token punctuation">[</span><span class="token operator">...</span>arrayLike<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">//第三种方法:</span>
Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>arrayLike<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>PS:</strong> 任何定义了遍历器（Iterator）接口的对象，都可以用扩展运算符转为真正的数组。</p> <p>Array.from方法用于将两类对象转为真正的数组：类似数组的对象（array-like object）和可遍历（iterable）的对象。</p> <h2 id="_6-和-有什么区别？"><a href="#_6-和-有什么区别？" aria-hidden="true" class="header-anchor">#</a> 6.== 和 === 有什么区别？</h2> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>=== 不需要进行类型转换，只有类型相同并且值相等时，才返回 true.</p> <p>== 如果两者类型不同，首先需要进行类型转换。具体流程如下:</p> <ol><li>首先判断两者类型是否相同，如果相等，判断值是否相等.</li> <li>如果类型不同，进行类型转换</li> <li>判断比较的是否是 null 或者是 undefined, 如果是, 返回 true .</li> <li>判断两者类型是否为 string 和 number, 如果是, 将字符串转换成 number</li> <li>判断其中一方是否为 boolean, 如果是, 将 boolean 转为 number 再进行判断</li> <li>判断其中一方是否为 object 且另一方为 string、number 或者 symbol , 如果是, 将 object 转为原始类型再进行判断</li></ol></div> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> person1 <span class="token operator">=</span> <span class="token punctuation">{</span>
    age<span class="token punctuation">:</span> <span class="token number">25</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> person2 <span class="token operator">=</span> person1<span class="token punctuation">;</span>
person2<span class="token punctuation">.</span>gae <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person1 <span class="token operator">===</span> person2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true,注意复杂数据类型，比较的是引用地址</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="思考"><a href="#思考" aria-hidden="true" class="header-anchor">#</a> 思考: <code>[] == ![]</code></h3> <p>我们来分析一下: <code>[] == ![]</code> 是true还是false？</p> <ol><li>首先，我们需要知道 ! 优先级是高于 == (更多运算符优先级可查看: <a href="https://link.juejin.im?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FJavaScript%2FReference%2FOperators%2FOperator_Precedence" target="_blank" rel="noopener noreferrer">运算符优先级<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>)</li> <li><code>![]</code> 😋<strong>引用类型转换成布尔值都是true</strong>,因此<code>![]</code>的是false</li> <li>根据上面的比较步骤中的第五条，其中一方是 boolean，将 boolean 转为 number 再进行判断，false转换成 number，对应的值是 0.</li> <li>根据上面比较步骤中的第六条，有一方是 number，那么将object也转换成Number,🐂<strong>空数组转换成数字，对应的值是0.</strong>(空数组转换成数字，对应的值是0，如果数组中只有一个数字，那么转成number就是这个数字，其它情况，均为NaN)</li> <li>0 == 0; 为true</li></ol> <h2 id="_7-es6中的class和es5的类有什么区别？"><a href="#_7-es6中的class和es5的类有什么区别？" aria-hidden="true" class="header-anchor">#</a> 7.ES6中的class和ES5的类有什么区别？</h2> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <ol><li>ES6 class 内部所有定义的方法都是不可枚举的;</li> <li>ES6 class 必须使用 new 调用;</li> <li>ES6 class 不存在变量提升;</li> <li>ES6 class 默认即是严格模式;</li> <li>ES6 class 子类必须在父类的构造函数中调用super()，这样才有this对象;ES5中类继承的关系是相反的，先有子类的this，然后用父类的方法应用在this上。</li></ol></div> <h2 id="_8-数组的哪些api会改变原数组？"><a href="#_8-数组的哪些api会改变原数组？" aria-hidden="true" class="header-anchor">#</a> 8. 数组的哪些API会改变原数组？</h2> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>修改原数组的API有:</p> <p>splice/reverse/fill/copyWithin/sort/push/pop/unshift/shift</p></div> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>不修改原数组的API有:</p> <p>slice/map/forEach/every/filter/reduce/entries/find</p></div> <p>注: 数组的每一项是简单数据类型，且未直接操作数组的情况下(稍后会对此题重新作答)。</p> <h2 id="_9-let、const-以及-var-的区别是什么？"><a href="#_9-let、const-以及-var-的区别是什么？" aria-hidden="true" class="header-anchor">#</a> 9. let、const 以及 var 的区别是什么？</h2> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <ul><li>let 和 const 定义的变量不会出现变量提升，而 var 定义的变量会提升。</li> <li>let 和 const 是JS中的块级作用域</li> <li>let 和 const 不允许重复声明(会抛出错误)</li> <li>let 和 const 定义的变量在定义语句之前，如果使用会抛出错误(形成了暂时性死区)，而 var 不会。</li> <li>const 声明一个只读的常量。一旦声明，常量的值就不能改变(如果声明是一个对象，那么不能改变的是对象的引用地址)</li></ul></div> <h2 id="_10-在js中什么是变量提升？什么是暂时性死区？"><a href="#_10-在js中什么是变量提升？什么是暂时性死区？" aria-hidden="true" class="header-anchor">#</a> 10. 在JS中什么是变量提升？什么是暂时性死区？</h2> <p>变量提升就是变量在声明之前就可以使用，值为undefined。</p> <p>在代码块内，使用 let/const 命令声明变量之前，该变量都是不可用的(会抛出错误)。这在语法上，称为“暂时性死区”。暂时性死区也意味着 typeof 不再是一个百分百安全的操作。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">typeof</span> x<span class="token punctuation">;</span> <span class="token comment">// ReferenceError(暂时性死区，抛错)</span>
<span class="token keyword">let</span> x<span class="token punctuation">;</span>

<span class="token keyword">typeof</span> y<span class="token punctuation">;</span> <span class="token comment">// 值是undefined,不会报错</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>😋暂时性死区的本质就是，只要一进入当前作用域，所要使用的变量就已经存在了，但是不可获取，只有等到声明变量的那一行代码出现，才可以获取和使用该变量。</p> <h2 id="_11-如何正确的判断this-箭头函数的this是什么？"><a href="#_11-如何正确的判断this-箭头函数的this是什么？" aria-hidden="true" class="header-anchor">#</a> 11. 如何正确的判断this? 箭头函数的this是什么？</h2> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>this的绑定规则有四种：默认绑定，隐式绑定，显式绑定，new绑定.</p> <ol><li>函数是否在 new 中调用(new绑定)，如果是，那么 this 绑定的是新创建的对象【前提是构造函数中没有返回对象或者是function，否则this指向返回的对象/function】。</li> <li>函数是否通过 call,apply 调用，或者使用了 bind (即硬绑定)，如果是，那么this绑定的就是指定的对象。</li> <li>函数是否在某个上下文对象中调用(隐式绑定)，如果是的话，this 绑定的是那个上下文对象。一般是 obj.foo()</li> <li>如果以上都不是，那么使用默认绑定。<strong>如果在严格模式下，则绑定到 undefined，否则绑定到全局对象。</strong></li> <li>如果把 null 或者 undefined 作为 this 的绑定对象传入 call、apply 或者 bind, 这些值在调用时会被忽略，实际应用的是默认绑定规则。</li> <li>箭头函数没有自己的 this, 它的this继承于上一层代码块的this。</li></ol></div> <p>测试下是否已经成功Get了此知识点(浏览器执行环境):</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> number <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    number<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
    fn1<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> number<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>number <span class="token operator">*=</span> <span class="token number">2</span><span class="token punctuation">;</span>
        number <span class="token operator">=</span> number <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
        number <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>number<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>number <span class="token operator">*=</span> <span class="token number">2</span><span class="token punctuation">;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
            number <span class="token operator">*=</span> <span class="token number">3</span><span class="token punctuation">;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> fn1 <span class="token operator">=</span> obj<span class="token punctuation">.</span>fn1<span class="token punctuation">;</span>
<span class="token function">fn1</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
obj<span class="token punctuation">.</span><span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>number<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>如果this的知识点，您还不太懂，请戳: <a href="https://link.juejin.im?target=https%3A%2F%2Fgithub.com%2FYvetteLau%2FBlog%2Fissues%2F6" target="_blank" rel="noopener noreferrer">嗨，你真的懂this吗？<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="_12-词法作用域和this的区别。"><a href="#_12-词法作用域和this的区别。" aria-hidden="true" class="header-anchor">#</a> 12. 词法作用域和this的区别。</h2> <ul><li>词法作用域是由你在写代码时将变量和块作用域写在哪里来决定的</li> <li>this 是在调用时被绑定的，this 指向什么，完全取决于函数的调用位置(关于this的指向问题，本文已经有说明)</li></ul> <h2 id="_13-谈谈你对js执行上下文栈和作用域链的理解。"><a href="#_13-谈谈你对js执行上下文栈和作用域链的理解。" aria-hidden="true" class="header-anchor">#</a> 13. 谈谈你对JS执行上下文栈和作用域链的理解。</h2> <p>执行上下文就是当前 JavaScript 代码被解析和执行时所在环境, JS执行上下文栈可以认为是一个存储函数调用的栈结构，遵循先进后出的原则。</p> <ul><li>JavaScript执行在单线程上，所有的代码都是排队执行。</li> <li>一开始浏览器执行全局的代码时，首先创建全局的执行上下文，压入执行栈的顶部。</li> <li>每当进入一个函数的执行就会创建函数的执行上下文，并且把它压入执行栈的顶部。当前函数执行-完成后，当前函数的执行上下文出栈，并等待垃圾回收。</li> <li>浏览器的JS执行引擎总是访问栈顶的执行上下文。</li> <li>全局上下文只有唯一的一个，它在浏览器关闭时出栈。</li></ul> <p>作用域链: 无论是 LHS 还是 RHS 查询，都会在当前的作用域开始查找，如果没有找到，就会向上级作用域继续查找目标标识符，每次上升一个作用域，一直到全局作用域为止。</p> <h2 id="_14-什么是闭包？闭包的作用是什么？闭包有哪些使用场景？"><a href="#_14-什么是闭包？闭包的作用是什么？闭包有哪些使用场景？" aria-hidden="true" class="header-anchor">#</a> 14. 什么是闭包？闭包的作用是什么？闭包有哪些使用场景？</h2> <p><strong>闭包是指有权访问另一个函数作用域中的变量的函数</strong>，创建闭包最常用的方式就是在一个函数内部创建另一个函数。</p> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>闭包的作用有:</p> <ol><li>封装私有变量</li> <li>模仿块级作用域(ES5中没有块级作用域)</li> <li>实现JS的模块</li></ol></div> <h2 id="_15-call、apply有什么区别？call-aplly和bind的内部是如何实现的？"><a href="#_15-call、apply有什么区别？call-aplly和bind的内部是如何实现的？" aria-hidden="true" class="header-anchor">#</a> 15. call、apply有什么区别？call,aplly和bind的内部是如何实现的？</h2> <p>call 和 apply 的功能相同，区别在于传参的方式不一样:</p> <ul><li>fn.call(obj, arg1, arg2, ...),调用一个函数, 具有一个指定的this值和分别地提供的参数(参数的列表)。</li> <li>fn.apply(obj, [argsArray]),调用一个函数，具有一个指定的this值，以及作为一个数组（或类数组对象）提供的参数。</li></ul> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>call核心:</p> <ul><li>将函数设为传入参数的属性</li> <li>指定this到函数并传入给定参数执行函数</li> <li>如果不传入参数或者参数为null，默认指向为 window / global</li> <li>删除参数上的函数</li></ul></div> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">call</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">/** 如果第一个参数传入的是 null 或者是 undefined, 那么指向this指向 window/global */</span>
    <span class="token comment">/** 如果第一个参数传入的不是null或者是undefined, 那么必须是一个对象 */</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//context为null或者是undefined</span>
        context <span class="token operator">=</span> <span class="token keyword">typeof</span> window <span class="token operator">===</span> <span class="token string">'undefined'</span> <span class="token operator">?</span> global <span class="token punctuation">:</span> window<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    context<span class="token punctuation">.</span>fn <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span> <span class="token comment">//this指向的是当前的函数(Function的实例)</span>
    <span class="token keyword">let</span> rest <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>arguments<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//获取除了this指向对象以外的参数, 空数组slice后返回的仍然是空数组</span>
    <span class="token keyword">let</span> result <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token operator">...</span>rest<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//隐式绑定,当前函数的this指向了context.</span>
    <span class="token keyword">delete</span> context<span class="token punctuation">.</span>fn<span class="token punctuation">;</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//测试代码</span>
<span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">'Selina'</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">'Chirs'</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token parameter">job<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>job<span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">bar</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>foo<span class="token punctuation">,</span> <span class="token string">'programmer'</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Selina programmer 20</span>
<span class="token function">bar</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">'teacher'</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 浏览器环境: Chirs teacher 25; node 环境: undefined teacher 25</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><blockquote><p>apply:</p></blockquote> <p>apply的实现和call很类似，但是需要注意他们的参数是不一样的，apply的第二个参数是数组或类数组.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">apply</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span> rest</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//context为null或者是undefined时,设置默认值</span>
        context <span class="token operator">=</span> <span class="token keyword">typeof</span> window <span class="token operator">===</span> <span class="token string">'undefined'</span> <span class="token operator">?</span> global <span class="token punctuation">:</span> window<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    context<span class="token punctuation">.</span>fn <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> result<span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>rest <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">||</span> rest <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//undefined 或者 是 null 不是 Iterator 对象，不能被 ...</span>
        result <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span>rest<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> rest <span class="token operator">===</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        result <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token operator">...</span>rest<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">delete</span> context<span class="token punctuation">.</span>fn<span class="token punctuation">;</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">'Selina'</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">'Chirs'</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token parameter">job<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>job<span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">bar</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>foo<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'programmer'</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Selina programmer 20</span>
<span class="token function">bar</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'teacher'</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 浏览器环境: Chirs programmer 20; node 环境: undefined teacher 25</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><blockquote><p>bind</p></blockquote> <p>bind 和 call/apply 有一个很重要的区别，一个函数被 call/apply 的时候，会直接调用，但是 bind 会创建一个新函数。当这个新函数被调用时，bind() 的第一个参数将作为它运行时的 this，之后的一序列参数将会在传递的实参前传入作为它的参数。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">bind</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token keyword">this</span> <span class="token operator">!==</span> <span class="token string">&quot;function&quot;</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
       <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token string">&quot;not a function&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">let</span> self <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> args <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>arguments<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">Fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token class-name">Fn</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span>
    <span class="token keyword">let</span> <span class="token function-variable function">bound</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>args<span class="token punctuation">,</span> <span class="token operator">...</span>arguments<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//bind传递的参数和函数调用时传递的参数拼接</span>
        context <span class="token operator">=</span> <span class="token keyword">this</span> <span class="token keyword">instanceof</span> <span class="token class-name">Fn</span> <span class="token operator">?</span> <span class="token keyword">this</span> <span class="token punctuation">:</span> context <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">self</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//原型链</span>
    bound<span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> bound<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">'Jack'</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">person</span><span class="token punctuation">(</span><span class="token parameter">age<span class="token punctuation">,</span> job<span class="token punctuation">,</span> gender</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token punctuation">,</span> age<span class="token punctuation">,</span> job<span class="token punctuation">,</span> gender<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> Yve <span class="token operator">=</span> <span class="token punctuation">{</span>name <span class="token punctuation">:</span> <span class="token string">'Yvette'</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token function">person</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>Yve<span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">,</span> <span class="token string">'enginner'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token string">'female'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h2 id="_16-new的原理是什么？通过new的方式创建对象和通过字面量创建有什么区别？"><a href="#_16-new的原理是什么？通过new的方式创建对象和通过字面量创建有什么区别？" aria-hidden="true" class="header-anchor">#</a> 16. new的原理是什么？通过new的方式创建对象和通过字面量创建有什么区别？</h2> <div class="tip custom-block"><p class="custom-block-title">new:</p> <ol><li>创建一个新对象。</li> <li>这个新对象会被执行[[原型]]连接。</li> <li>属性和方法被加入到 this 引用的对象中。并执行了构造函数中的方法.</li> <li>如果函数没有返回其他对象，那么this指向这个新对象，否则this指向构造函数中返回的对象。</li></ol></div> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token keyword">new</span><span class="token punctuation">(</span><span class="token parameter">func</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> target <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    target<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> func<span class="token punctuation">.</span>prototype<span class="token punctuation">;</span>
    <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token function">func</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>res <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">&quot;object&quot;</span> <span class="token operator">||</span> <span class="token keyword">typeof</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">&quot;function&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    	<span class="token keyword">return</span> res<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> target<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>字面量创建对象，不会调用 Object构造函数, 简洁且性能更好;</p> <p>new Object() 方式创建对象本质上是方法调用，涉及到在proto链中遍历该方法，当找到该方法后，又会生产方法调用必须的 堆栈信息，方法调用结束后，还要释放该堆栈，性能不如字面量的方式。</p> <p>通过对象字面量定义对象时，不会调用Object构造函数。</p> <h2 id="_17-谈谈你对原型的理解？"><a href="#_17-谈谈你对原型的理解？" aria-hidden="true" class="header-anchor">#</a> 17. 谈谈你对原型的理解？</h2> <p>😋在 JavaScript 中，每当定义一个对象（函数也是对象）时候，对象中都会包含一些预定义的属性。其中每个函数对象都有一个prototype 属性，这个属性指向函数的原型对象。使用原型对象的好处是<strong>所有对象实例共享它所包含的属性和方法</strong>。</p> <h2 id="_18-什么是原型链？【原型链解决的是什么问题？】"><a href="#_18-什么是原型链？【原型链解决的是什么问题？】" aria-hidden="true" class="header-anchor">#</a> 18. 什么是原型链？【原型链解决的是什么问题？】</h2> <p>原型链解决的主要是继承问题。</p> <p>每个对象拥有一个原型对象，通过 <strong>proto</strong> (读音: dunder proto) 指针指向其原型对象，并从中继承方法和属性，同时原型对象也可能拥有原型，这样一层一层，最终指向 null(<code>Object.proptotype.__proto__</code> 指向的是null)。这种关系被称为原型链 (prototype chain)，通过原型链一个对象可以拥有定义在其他对象中的属性和方法。</p> <p>构造函数 Parent、Parent.prototype 和 实例 p 的关系如下:<code>(p.__proto__ === Parent.prototype)</code></p> <p><img src="/assets/img/1561366604965.7bafea93.png" alt="1561366604965"></p> <h2 id="_19-prototype-和-proto-区别是什么？"><a href="#_19-prototype-和-proto-区别是什么？" aria-hidden="true" class="header-anchor">#</a> 19. prototype 和 <code>__proto__</code> 区别是什么？</h2> <p>prototype是构造函数的属性。</p> <p><code>__proto__</code> 是每个实例都有的属性，可以访问 [[prototype]] 属性。</p> <p>实例的<code>__proto__</code> 与其构造函数的prototype指向的是同一个对象。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Student</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">Student</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">setAge</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> Jack <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">'jack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Jack<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//console.log(Object.getPrototypeOf(Jack));;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Student</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Jack<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Student</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="_20-使用es5实现一个继承？"><a href="#_20-使用es5实现一个继承？" aria-hidden="true" class="header-anchor">#</a> 20. 使用ES5实现一个继承？</h2> <blockquote><p>组合继承(最常用的继承方式)</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">SuperType</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>colors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token string">'blue'</span><span class="token punctuation">,</span> <span class="token string">'green'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">SuperType</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">SubType</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">SuperType</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">SubType</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SuperType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">SubType</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> SubType<span class="token punctuation">;</span>

<span class="token class-name">SubType</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayAge</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>其它继承方式实现，可以参考《JavaScript高级程序设计》</p> <p>请跳转《<a href="/font/JS/构造函数、原型、继承和原型链.html">原型继承</a>》一文</p> <h2 id="_21-什么是深拷贝？深拷贝和浅拷贝有什么区别？"><a href="#_21-什么是深拷贝？深拷贝和浅拷贝有什么区别？" aria-hidden="true" class="header-anchor">#</a> 21. 什么是深拷贝？深拷贝和浅拷贝有什么区别？</h2> <p>浅拷贝是指只复制第一层对象，但是当对象的属性是引用类型时，实质复制的是其引用，当引用指向的值改变时也会跟着变化。</p> <p>深拷贝复制变量值，对于非基本类型的变量，则递归至基本类型变量后，再复制。深拷贝后的对象与原来的对象是完全隔离的，互不影响，对一个对象的修改并不会影响另一个对象。</p> <p>实现一个深拷贝:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">deepClone</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//递归拷贝</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>obj <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">//null 的情况</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">RegExp</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">Date</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> obj <span class="token operator">!==</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//如果不是复杂数据类型，直接返回</span>
        <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">/**
     * 如果obj是数组，那么 obj.constructor 是 [Function: Array]
     * 如果obj是对象，那么 obj.constructor 是 [Function: Object]
     */</span>
    <span class="token keyword">let</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">obj<span class="token punctuation">.</span>constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//如果 obj[key] 是复杂数据类型，递归</span>
        t<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">deepClone</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> t<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/app.d504157c.js" defer></script><script src="/assets/js/27.69957860.js" defer></script>
  </body>
</html>
