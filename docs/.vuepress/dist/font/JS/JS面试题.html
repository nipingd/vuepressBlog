<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>问题1：浏览器控制台上会打印什么？ | niping</title>
    <meta name="description" content="欢迎来到我的博客">
    <link rel="icon" href="/logo.jpg">
    
    <link rel="preload" href="/assets/css/0.styles.b8bd58f1.css" as="style"><link rel="preload" href="/assets/js/app.68ed7411.js" as="script"><link rel="preload" href="/assets/js/19.28ecbccf.js" as="script"><link rel="prefetch" href="/assets/js/10.f27afa9a.js"><link rel="prefetch" href="/assets/js/11.93d8fca0.js"><link rel="prefetch" href="/assets/js/12.d3d20f16.js"><link rel="prefetch" href="/assets/js/13.2da779de.js"><link rel="prefetch" href="/assets/js/14.d80cd0eb.js"><link rel="prefetch" href="/assets/js/15.b7c38188.js"><link rel="prefetch" href="/assets/js/16.041108a7.js"><link rel="prefetch" href="/assets/js/17.1ac773c6.js"><link rel="prefetch" href="/assets/js/18.624d7a0d.js"><link rel="prefetch" href="/assets/js/2.614c87b5.js"><link rel="prefetch" href="/assets/js/20.f99246ae.js"><link rel="prefetch" href="/assets/js/21.1320046a.js"><link rel="prefetch" href="/assets/js/22.59d76713.js"><link rel="prefetch" href="/assets/js/23.20a48656.js"><link rel="prefetch" href="/assets/js/24.ef94e0cc.js"><link rel="prefetch" href="/assets/js/25.51db35a8.js"><link rel="prefetch" href="/assets/js/26.df0df4dd.js"><link rel="prefetch" href="/assets/js/27.cc794e1c.js"><link rel="prefetch" href="/assets/js/28.5766fdbf.js"><link rel="prefetch" href="/assets/js/29.82878b6e.js"><link rel="prefetch" href="/assets/js/3.fdc4b401.js"><link rel="prefetch" href="/assets/js/30.a76f6251.js"><link rel="prefetch" href="/assets/js/31.c8fb98cd.js"><link rel="prefetch" href="/assets/js/32.58711c01.js"><link rel="prefetch" href="/assets/js/33.3b149159.js"><link rel="prefetch" href="/assets/js/34.aca82313.js"><link rel="prefetch" href="/assets/js/35.003738f6.js"><link rel="prefetch" href="/assets/js/36.dcad4e28.js"><link rel="prefetch" href="/assets/js/37.dce77ad4.js"><link rel="prefetch" href="/assets/js/38.e5a3f783.js"><link rel="prefetch" href="/assets/js/39.477e125e.js"><link rel="prefetch" href="/assets/js/4.b93333af.js"><link rel="prefetch" href="/assets/js/40.f841cb45.js"><link rel="prefetch" href="/assets/js/41.7e21bdb9.js"><link rel="prefetch" href="/assets/js/42.e8d689c7.js"><link rel="prefetch" href="/assets/js/43.4c7a6b68.js"><link rel="prefetch" href="/assets/js/44.3f2ea8ef.js"><link rel="prefetch" href="/assets/js/45.7df722ac.js"><link rel="prefetch" href="/assets/js/46.a2f4931a.js"><link rel="prefetch" href="/assets/js/47.3600244d.js"><link rel="prefetch" href="/assets/js/48.45155a52.js"><link rel="prefetch" href="/assets/js/49.52106252.js"><link rel="prefetch" href="/assets/js/5.e4fa1d62.js"><link rel="prefetch" href="/assets/js/50.938e28b4.js"><link rel="prefetch" href="/assets/js/51.e0377e5a.js"><link rel="prefetch" href="/assets/js/52.e10b7142.js"><link rel="prefetch" href="/assets/js/53.22eeb2e5.js"><link rel="prefetch" href="/assets/js/54.51951cdd.js"><link rel="prefetch" href="/assets/js/55.37869747.js"><link rel="prefetch" href="/assets/js/56.fa980d23.js"><link rel="prefetch" href="/assets/js/57.18c6cecf.js"><link rel="prefetch" href="/assets/js/58.825728ca.js"><link rel="prefetch" href="/assets/js/59.5cc2e8c9.js"><link rel="prefetch" href="/assets/js/6.a80f0659.js"><link rel="prefetch" href="/assets/js/60.8dbdc608.js"><link rel="prefetch" href="/assets/js/61.3a69db7e.js"><link rel="prefetch" href="/assets/js/62.62ad0e3d.js"><link rel="prefetch" href="/assets/js/63.f3ab974f.js"><link rel="prefetch" href="/assets/js/64.d1e8d80c.js"><link rel="prefetch" href="/assets/js/65.af99075e.js"><link rel="prefetch" href="/assets/js/66.25fb3146.js"><link rel="prefetch" href="/assets/js/67.bc4e176c.js"><link rel="prefetch" href="/assets/js/68.98be60a1.js"><link rel="prefetch" href="/assets/js/7.447982d1.js"><link rel="prefetch" href="/assets/js/8.bd9de65a.js"><link rel="prefetch" href="/assets/js/9.e72b34e3.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b8bd58f1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">niping</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">HOME</a></div><div class="nav-item"><a href="/font/" class="nav-link router-link-active">前端</a></div><div class="nav-item"><a href="/computer/" class="nav-link">计算机</a></div><div class="nav-item"><a href="/other/" class="nav-link">个人学习笔记</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">关于我</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.instagram.com/nipingd/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  instagram
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/nipingd" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">HOME</a></div><div class="nav-item"><a href="/font/" class="nav-link router-link-active">前端</a></div><div class="nav-item"><a href="/computer/" class="nav-link">计算机</a></div><div class="nav-item"><a href="/other/" class="nav-link">个人学习笔记</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">关于我</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.instagram.com/nipingd/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  instagram
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/nipingd" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading open"><span>JS</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/font/JS/apply、call与bind.html" class="sidebar-link">apply、call与bind</a></li><li><a href="/font/JS/JS单线程、异步、同步.html" class="sidebar-link">JS单线程、异步、同步</a></li><li><a href="/font/JS/常用正则表达式备忘录.html" class="sidebar-link">常用正则表达式备忘录</a></li><li><a href="/font/JS/Object.defineProperty与Proxy理解整理.html" class="sidebar-link">Object.defineProperty与Proxy理解整理</a></li><li><a href="/font/JS/柯里化.html" class="sidebar-link">柯里化</a></li><li><a href="/font/JS/JS技巧.html" class="sidebar-link">JS技巧</a></li><li><a href="/font/JS/闭包.html" class="sidebar-link">闭包</a></li><li><a href="/font/JS/作用域与作用域链.html" class="sidebar-link">作用域与作用域链</a></li><li><a href="/font/JS/JS运行机制总结.html" class="sidebar-link">JS运行机制总结</a></li><li><a href="/font/JS/赋值、浅拷贝与深拷贝.html" class="sidebar-link">赋值、浅拷贝与深拷贝</a></li><li><a href="/font/JS/构造函数、原型、继承和原型链.html" class="sidebar-link">构造函数、原型、继承和原型链</a></li><li><a href="/font/JS/原生JS知识.html" class="sidebar-link">原生JS知识</a></li><li><a href="/font/JS/防抖与节流.html" class="sidebar-link">防抖与节流</a></li><li><a href="/font/JS/类型转换比较问题.html" class="sidebar-link">类型转换比较问题</a></li><li><a href="/font/JS/JS中有趣的事实.html" class="sidebar-link">JS中有趣的事实</a></li><li><a href="/font/JS/正则表达式必知必会.html" class="sidebar-link">正则表达式必知必会</a></li><li><a href="/font/JS/空对象与空数组相加问题.html" class="sidebar-link">空对象与空数组相加问题</a></li><li><a href="/font/JS/JS面试题.html" class="active sidebar-link">JS面试题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/font/JS/JS面试题.html#问题1：浏览器控制台上会打印什么？" class="sidebar-link">问题1：浏览器控制台上会打印什么？</a></li><li class="sidebar-sub-header"><a href="/font/JS/JS面试题.html#问题2-如果我们使用-let-或-const-代替-var，输出是否相同" class="sidebar-link">问题2:如果我们使用 let 或 const 代替 var，输出是否相同</a></li><li class="sidebar-sub-header"><a href="/font/JS/JS面试题.html#问题3：“newarray”中有哪些元素？" class="sidebar-link">问题3：“newArray”中有哪些元素？</a></li><li class="sidebar-sub-header"><a href="/font/JS/JS面试题.html#问题4：如果我们在浏览器控制台中运行-foo-函数，是否会导致堆栈溢出错误？" class="sidebar-link">问题4：如果我们在浏览器控制台中运行'foo'函数，是否会导致堆栈溢出错误？</a></li><li class="sidebar-sub-header"><a href="/font/JS/JS面试题.html#步骤" class="sidebar-link">步骤</a></li><li class="sidebar-sub-header"><a href="/font/JS/JS面试题.html#问题5-如果在控制台中运行以下函数，页面-选项卡-的-ui-是否仍然响应" class="sidebar-link">问题5: 如果在控制台中运行以下函数，页面(选项卡)的 UI 是否仍然响应</a></li><li class="sidebar-sub-header"><a href="/font/JS/JS面试题.html#问题6-我们能否以某种方式为下面的语句使用展开运算而不导致类型错误" class="sidebar-link">问题6: 我们能否以某种方式为下面的语句使用展开运算而不导致类型错误</a></li><li class="sidebar-sub-header"><a href="/font/JS/JS面试题.html#问题7：运行以下代码片段时，控制台上会打印什么？" class="sidebar-link">问题7：运行以下代码片段时，控制台上会打印什么？</a></li><li class="sidebar-sub-header"><a href="/font/JS/JS面试题.html#问题8：xgetter-会打印什么值？" class="sidebar-link">问题8：xGetter() 会打印什么值？</a></li></ul></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>ES6</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>浏览器网络</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>CSS</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>vue</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>node</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>其他</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page"> <div class="content"><h2 id="问题1：浏览器控制台上会打印什么？"><a href="#问题1：浏览器控制台上会打印什么？" aria-hidden="true" class="header-anchor">#</a> 问题1：浏览器控制台上会打印什么？</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ??</span>
    <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="问题1：-undefined"><a href="#问题1：-undefined" aria-hidden="true" class="header-anchor">#</a> 问题1： <code>undefined</code></h4> <h4 id="解析："><a href="#解析：" aria-hidden="true" class="header-anchor">#</a> 解析：</h4> <p>使用<code>var</code>关键字声明的变量在JavaScript中会被提升，并在内存中分配值<code>undefined</code>。 但初始化恰发生在你给变量赋值的地方。 另外，<code>var</code>声明的变量是<a href="https://link.juejin.im?target=https%3A%2F%2F2ality.com%2F2011%2F02%2Fjavascript-variable-scoping-and-its.html" target="_blank" rel="noopener noreferrer">函数作用域的<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，而<code>let</code>和<code>const</code>是块作用域的。 所以，这就是这个过程的样子：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">// 全局使用域</span>
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">// var a 的声明将被提升到到函数的顶部。</span>
<span class="token comment">// 比如:var a</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 打印 undefined</span>

<span class="token comment">// 实际初始化值20只发生在这里</span>
   <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span> <span class="token comment">// local scope</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="问题2-如果我们使用-let-或-const-代替-var，输出是否相同"><a href="#问题2-如果我们使用-let-或-const-代替-var，输出是否相同" aria-hidden="true" class="header-anchor">#</a> 问题2:如果我们使用 let 或 const 代替 var，输出是否相同</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ??</span>
    <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="问题-2：referenceerror：a-undefined。"><a href="#问题-2：referenceerror：a-undefined。" aria-hidden="true" class="header-anchor">#</a> 问题 2：<code>ReferenceError：a undefined</code>。</h4> <h4 id="解析：-2"><a href="#解析：-2" aria-hidden="true" class="header-anchor">#</a> 解析：</h4> <p><code>let</code>和<code>const</code>声明可以让变量在其作用域上受限于它所使用的块、语句或表达式。与<code>var</code>不同的是，这些变量没有被提升，并且有一个所谓的<strong>暂时死区(TDZ)</strong>。试图访问<strong>TDZ</strong>中的这些变量将引发<code>ReferenceError</code>，因为只有在执行到达声明时才能访问它们。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">// 全局使用域</span>
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// TDZ 开始</span>

<span class="token comment">// 创建了未初始化的'a'</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ReferenceError</span>

<span class="token comment">// TDZ结束，'a'仅在此处初始化，值为20</span>
    <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>下表概述了与JavaScript中使用的不同关键字声明的变量对应的提升行为和使用域：</p> <p><img src="/assets/img/1565361263389.5deecee6.png" alt="1565361263389"></p> <h2 id="问题3：“newarray”中有哪些元素？"><a href="#问题3：“newarray”中有哪些元素？" aria-hidden="true" class="header-anchor">#</a> 问题3：“newArray”中有哪些元素？</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> array <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span><span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 array<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> newArray <span class="token operator">=</span> array<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">el</span> <span class="token operator">=&gt;</span> <span class="token function">el</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newArray<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ??   </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="问题-3-3-3-3"><a href="#问题-3-3-3-3" aria-hidden="true" class="header-anchor">#</a> 问题 3: <code>[3, 3, 3]</code></h4> <h4 id="解析：-3"><a href="#解析：-3" aria-hidden="true" class="header-anchor">#</a> 解析：</h4> <p>在<code>for</code>循环的头部声明带有<code>var</code>关键字的变量会为该变量创建单个绑定（存储空间）。 阅读更多关于<a href="https://link.juejin.im?target=http%3A%2F%2Fdmitrysoshnikov.com%2Fecmascript%2Fchapter-6-closures%2F" target="_blank" rel="noopener noreferrer">闭包<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>的信息。 让我们再看一次for循环。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 误解作用域:认为存在块级作用域</span>
<span class="token keyword">var</span> array <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 三个箭头函数体中的每个`'i'`都指向相同的绑定，</span>
  <span class="token comment">// 这就是为什么它们在循环结束时返回相同的值'3'。</span>
  array<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> newArray <span class="token operator">=</span> array<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">el</span> <span class="token operator">=&gt;</span> <span class="token function">el</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newArray<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [3, 3, 3]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>如果使用 <code>let</code> 声明一个具有块级作用域的变量，则为每个循环迭代创建一个新的绑定。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 使用ES6块级作用域</span>
<span class="token keyword">var</span> array <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 这一次，每个'i'指的是一个新的的绑定，并保留当前的值。</span>
 <span class="token comment">// 因此，每个箭头函数返回一个不同的值。</span>
  array<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> newArray <span class="token operator">=</span> array<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">el</span> <span class="token operator">=&gt;</span> <span class="token function">el</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newArray<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [0, 1, 2]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>解决这个问题的另一种方法是使用<a href="https://link.juejin.im?target=http%3A%2F%2Fdmitrysoshnikov.com%2Fecmascript%2Fchapter-6-closures%2F" target="_blank" rel="noopener noreferrer">闭包<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> array <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  array<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> x<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> newArray <span class="token operator">=</span> array<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">el</span> <span class="token operator">=&gt;</span> <span class="token function">el</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newArray<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [0, 1, 2]  </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="问题4：如果我们在浏览器控制台中运行-foo-函数，是否会导致堆栈溢出错误？"><a href="#问题4：如果我们在浏览器控制台中运行-foo-函数，是否会导致堆栈溢出错误？" aria-hidden="true" class="header-anchor">#</a> 问题4：如果我们在浏览器控制台中运行'foo'函数，是否会导致堆栈溢出错误？</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span>foo<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 是否存在堆栈溢出错误?</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>    
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="问题4-不会溢出"><a href="#问题4-不会溢出" aria-hidden="true" class="header-anchor">#</a> 问题4 : 不会溢出</h4> <h4 id="解析：-4"><a href="#解析：-4" aria-hidden="true" class="header-anchor">#</a> 解析：</h4> <p>JavaScript并发模型基于“事件循环”。 当我们说“浏览器是 JS 的家”时我真正的意思是浏览器提供运行时环境来执行我们的JS代码。</p> <p>浏览器的主要组件包括<strong>调用堆栈</strong>，<strong>事件循环</strong>**，任务队列<strong>和</strong>Web API**。 像<code>setTimeout</code>，<code>setInterval</code>和<code>Promise</code>这样的全局函数不是JavaScript的一部分，而是 Web API 的一部分。 JavaScript 环境的可视化形式如下所示：</p> <p><img src="/assets/img/1565361602465.e9f8f264.png" alt="1565361602465"></p> <p>JS调用栈是后进先出(LIFO)的。引擎每次从堆栈中取出一个函数，然后从上到下依次运行代码。每当它遇到一些异步代码，如<code>setTimeout</code>，它就把它交给<code>Web API</code>(箭头1)。因此，每当事件被触发时，<code>callback</code> 都会被发送到任务队列（箭头2）。</p> <p><strong>事件循环(Event loop)不断地监视任务队列(Task Queue)，并按它们排队的顺序一次处理一个回调。每当调用堆栈(call stack)为空时，Event loop获取回调并将其放入堆栈(stack )</strong>(箭头3)中进行处理。请记住，如果调用堆栈不是空的，<strong>则事件循环不会将任何回调推入堆栈</strong>。</p> <p>现在，有了这些知识，让我们来回答前面提到的问题：</p> <h2 id="步骤"><a href="#步骤" aria-hidden="true" class="header-anchor">#</a> 步骤</h2> <ol><li>调用 <code>foo()</code>会将<code>foo</code>函数放入<strong>调用堆栈(call stack)</strong>。</li> <li>在处理内部代码时，JS引擎遇到<code>setTimeout</code>。</li> <li>然后将<code>foo</code>回调函数传递给<strong>WebAPIs</strong>(箭头1)并从函数返回，调用堆栈再次为空</li> <li>计时器被设置为0，因此<code>foo</code>将被发送到<strong>任务队列</strong>(箭头2)。</li> <li>由于调用堆栈是空的，事件循环将选择<code>foo</code>回调并将其推入调用堆栈进行处理。</li> <li>进程再次重复，堆栈不会溢出。</li></ol> <p>运行示意图如下所示：</p> <p><img src="/assets/img/1565361796134.bbb22d79.png" alt="1565361796134"></p> <h2 id="问题5-如果在控制台中运行以下函数，页面-选项卡-的-ui-是否仍然响应"><a href="#问题5-如果在控制台中运行以下函数，页面-选项卡-的-ui-是否仍然响应" aria-hidden="true" class="header-anchor">#</a> 问题5: 如果在控制台中运行以下函数，页面(选项卡)的 UI 是否仍然响应</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="问题5-不会响应"><a href="#问题5-不会响应" aria-hidden="true" class="header-anchor">#</a> 问题5 : 不会响应</h4> <h4 id="解析：-5"><a href="#解析：-5" aria-hidden="true" class="header-anchor">#</a> 解析：</h4> <p>大多数时候，开发人员假设在<strong>事件循环图中只有一个任务队列。但事实并非如此，我们可以有多个任务队列。由浏览器选择其中的一个队列并在该队列中处理回调</strong>。</p> <p>在底层来看，JavaScript中有宏任务和微任务。<code>setTimeout</code>回调是<strong>宏任务</strong>，而<code>Promise</code>回调是<strong>微任务</strong>。</p> <p>主要的区别在于他们的执行方式。宏任务在单个循环周期中一次一个地推入堆栈，但是微任务队列总是在执行后返回到事件循环之前清空。因此，如果你以处理条目的速度向这个队列添加条目，那么你就永远在处理微任务。只有当微任务队列为空时，事件循环才会重新渲染页面、</p> <p>现在，当你在控制台中运行以下代码段</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>每次调用'<code>foo</code>'都会继续在微任务队列上添加另一个'<code>foo</code>'回调，因此事件循环无法继续处理其他事件（滚动，单击等），直到该队列完全清空为止。 因此，它会阻止渲染。</p> <h2 id="问题6-我们能否以某种方式为下面的语句使用展开运算而不导致类型错误"><a href="#问题6-我们能否以某种方式为下面的语句使用展开运算而不导致类型错误" aria-hidden="true" class="header-anchor">#</a> 问题6: 我们能否以某种方式为下面的语句使用展开运算而不导致类型错误</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> x<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> z<span class="token punctuation">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">[</span><span class="token operator">...</span>obj<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// TypeError </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="问题6-会导致typeerror错误"><a href="#问题6-会导致typeerror错误" aria-hidden="true" class="header-anchor">#</a> 问题6 : 会导致TypeError错误</h4> <h4 id="解析：-6"><a href="#解析：-6" aria-hidden="true" class="header-anchor">#</a> 解析：</h4> <p><a href="https://link.juejin.im?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FJavaScript%2FReference%2FOperators%2FSpread_syntax" target="_blank" rel="noopener noreferrer">展开语法<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 和 <a href="https://link.juejin.im?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FJavaScript%2FReference%2FStatements%2Ffor...of" target="_blank" rel="noopener noreferrer">for-of<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 语句遍历<code>iterable</code>对象定义要遍历的数据。<code>Array</code> 或<code>Map</code> 是具有默认迭代行为的内置迭代器。对象不是可迭代的，但是可以通过使用<a href="https://link.juejin.im?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FJavaScript%2FReference%2FIteration_protocols%23The_iterable_protocol" target="_blank" rel="noopener noreferrer">iterable<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>和<a href="https://link.juejin.im?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FJavaScript%2FReference%2FIteration_protocols%23The_iterator_protocol" target="_blank" rel="noopener noreferrer">iterator<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>协议使它们可迭代。</p> <p>在<strong>Mozilla</strong>文档中，如果一个对象实现了<code>@@iterator</code>方法，那么它就是可迭代的，这意味着这个对象(或者它原型链上的一个对象)必须有一个带有<code>@@iterator</code>键的属性，这个键可以通过常量<code>Symbol.iterator</code>获得。</p> <p>上述语句可能看起来有点冗长，但是下面的示例将更有意义：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> x<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> z<span class="token punctuation">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
obj<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  
  <span class="token comment">// iterator 是一个具有 next 方法的对象，</span>
  <span class="token comment">// 它的返回至少有一个对象</span>
  <span class="token comment">// 两个属性：value＆done。</span>

  <span class="token comment">// 返回一个 iterator 对象</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">next</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_countDown <span class="token operator">===</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> lastValue <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_countDown<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span> value<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_countDown<span class="token punctuation">,</span> done<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>_countDown <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_countDown <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span> value<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_countDown<span class="token punctuation">,</span> done<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    _countDown<span class="token punctuation">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">[</span><span class="token operator">...</span>obj<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 打印 [1, 2, 3]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>还可以使用 <a href="https://link.juejin.im?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FJavaScript%2FReference%2FStatements%2Ffunction*" target="_blank" rel="noopener noreferrer">generator<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 函数来定制对象的迭代行为：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>x<span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">,</span> z<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">}</span>
obj<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">yield</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">yield</span> <span class="token number">2</span><span class="token punctuation">;</span>
  <span class="token keyword">yield</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">[</span><span class="token operator">...</span>obj<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 打印 [1, 2, 3]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="问题7：运行以下代码片段时，控制台上会打印什么？"><a href="#问题7：运行以下代码片段时，控制台上会打印什么？" aria-hidden="true" class="header-anchor">#</a> 问题7：运行以下代码片段时，控制台上会打印什么？</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">setPrototypeOf</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token punctuation">{</span>c<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'d'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> value<span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">,</span> enumerable<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// what properties will be printed when we run the for-in loop?</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> prop <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>prop<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="问题7-a-b-c"><a href="#问题7-a-b-c" aria-hidden="true" class="header-anchor">#</a> 问题7 : a, b, c</h4> <h4 id="解析：-7"><a href="#解析：-7" aria-hidden="true" class="header-anchor">#</a> 解析：</h4> <p><code>for-in</code>循环遍历对象本身的<a href="https://link.juejin.im?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FJavaScript%2FEnumerability_and_ownership_of_properties" target="_blank" rel="noopener noreferrer">可枚举属性<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>以及对象从其原型继承的属性。 可枚举属性是可以在<code>for-in</code>循环期间包含和访问的属性。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> descriptor <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>descriptor<span class="token punctuation">.</span>enumerable<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>descriptor<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// { value: 1, writable: true, enumerable: true, configurable: true }</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>现在你已经掌握了这些知识，应该很容易理解为什么我们的代码要打印这些特定的属性</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">//a，b 都是 enumerables 属性</span>

<span class="token comment">// 将{c：3}设置为'obj'的原型，并且我们知道</span>
<span class="token comment">// for-in 循环也迭代 obj 继承的属性</span>
<span class="token comment">// 从它的原型，'c'也可以被访问。</span>
Object<span class="token punctuation">.</span><span class="token function">setPrototypeOf</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token punctuation">{</span> c<span class="token punctuation">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 我们在'obj'中定义了另外一个属性'd'，但是 </span>
<span class="token comment">// 将'enumerable'设置为false。 这意味着'd'将被忽略。</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">&quot;d&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> value<span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">,</span> enumerable<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> prop <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>prop<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 打印</span>
<span class="token comment">// a</span>
<span class="token comment">// b</span>
<span class="token comment">// c</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h2 id="问题8：xgetter-会打印什么值？"><a href="#问题8：xgetter-会打印什么值？" aria-hidden="true" class="header-anchor">#</a> 问题8：xGetter() 会打印什么值？</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>var x = 10;
var foo = {
  x: 90,
  getX: function() {
    return this.x;
  }
};
foo.getX(); // prints 90
var xGetter = foo.getX;
xGetter(); // prints ??
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="问题8-10"><a href="#问题8-10" aria-hidden="true" class="header-anchor">#</a> 问题8 : 10</h4> <h4 id="解析：-8"><a href="#解析：-8" aria-hidden="true" class="header-anchor">#</a> 解析：</h4> <p>在全局范围内初始化<code>x</code>时，它成为window对象的属性(不是严格的模式)。看看下面的代码:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">// global scope</span>
<span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token punctuation">{</span>
  x<span class="token punctuation">:</span> <span class="token number">90</span><span class="token punctuation">,</span>
  <span class="token function-variable function">getX</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
foo<span class="token punctuation">.</span><span class="token function">getX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// prints 90</span>
<span class="token keyword">let</span> xGetter <span class="token operator">=</span> foo<span class="token punctuation">.</span>getX<span class="token punctuation">;</span>
<span class="token function">xGetter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// prints 10</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>咱们可以断言：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>window<span class="token punctuation">.</span>x <span class="token operator">===</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>this</code> 始终指向调用方法的对象。因此，在<code>foo.getx()</code>的例子中，它指向<code>foo</code>对象，返回<code>90</code>的值。而在<code>xGetter()</code>的情况下，<code>this</code>指向 window对象, 返回 <strong>window</strong> 中的<code>x</code>的值，即<code>10</code>。</p> <p>要获取 <code>foo.x</code>的值，可以通过使用<code>Function.prototype.bind</code>将<code>this</code>的值绑定到<code>foo</code>对象来创建新函数。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> getFooX <span class="token operator">=</span> foo<span class="token punctuation">.</span><span class="token function">getX</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">getFooX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 90</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>作者：前端小智</p> <p>链接：https://juejin.im/post/5d2d146bf265da1b9163c5c9</p> <p>来源：掘金著作权归作者所有。</p></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/app.68ed7411.js" defer></script><script src="/assets/js/19.28ecbccf.js" defer></script>
  </body>
</html>
