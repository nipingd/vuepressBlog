<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>1.浏览器控制台上会打印什么？ | niping</title>
    <meta name="description" content="欢迎来到我的博客">
    <link rel="icon" href="/logo.jpg">
    
    <link rel="preload" href="/assets/css/0.styles.b8bd58f1.css" as="style"><link rel="preload" href="/assets/js/app.df7a5572.js" as="script"><link rel="preload" href="/assets/js/20.edd41887.js" as="script"><link rel="prefetch" href="/assets/js/10.9750ff63.js"><link rel="prefetch" href="/assets/js/11.b02649f2.js"><link rel="prefetch" href="/assets/js/12.cdbfd2a2.js"><link rel="prefetch" href="/assets/js/13.e6c7b6d7.js"><link rel="prefetch" href="/assets/js/14.1a0bebd2.js"><link rel="prefetch" href="/assets/js/15.f06268a8.js"><link rel="prefetch" href="/assets/js/16.cecf29ec.js"><link rel="prefetch" href="/assets/js/17.8e4e94af.js"><link rel="prefetch" href="/assets/js/18.d690a13f.js"><link rel="prefetch" href="/assets/js/19.091e3148.js"><link rel="prefetch" href="/assets/js/2.8c26112d.js"><link rel="prefetch" href="/assets/js/21.565d227d.js"><link rel="prefetch" href="/assets/js/22.ca9b5aaf.js"><link rel="prefetch" href="/assets/js/23.4ce41067.js"><link rel="prefetch" href="/assets/js/24.316d851a.js"><link rel="prefetch" href="/assets/js/25.12260351.js"><link rel="prefetch" href="/assets/js/26.94b9c867.js"><link rel="prefetch" href="/assets/js/27.01b6b339.js"><link rel="prefetch" href="/assets/js/28.1506135b.js"><link rel="prefetch" href="/assets/js/29.d5653b7a.js"><link rel="prefetch" href="/assets/js/3.2a2b76ff.js"><link rel="prefetch" href="/assets/js/30.865f73f2.js"><link rel="prefetch" href="/assets/js/31.23eba052.js"><link rel="prefetch" href="/assets/js/32.443ee40d.js"><link rel="prefetch" href="/assets/js/33.52a5c87f.js"><link rel="prefetch" href="/assets/js/34.beae71e3.js"><link rel="prefetch" href="/assets/js/35.96982b0a.js"><link rel="prefetch" href="/assets/js/36.b6e18121.js"><link rel="prefetch" href="/assets/js/37.c3f7d8d7.js"><link rel="prefetch" href="/assets/js/38.28a8b153.js"><link rel="prefetch" href="/assets/js/39.7c56eaf4.js"><link rel="prefetch" href="/assets/js/4.453e5958.js"><link rel="prefetch" href="/assets/js/40.c344cd64.js"><link rel="prefetch" href="/assets/js/41.868adac5.js"><link rel="prefetch" href="/assets/js/42.8838d36e.js"><link rel="prefetch" href="/assets/js/43.f6cd6f37.js"><link rel="prefetch" href="/assets/js/44.d38d63b3.js"><link rel="prefetch" href="/assets/js/45.86e8b1cc.js"><link rel="prefetch" href="/assets/js/46.dd04d46f.js"><link rel="prefetch" href="/assets/js/47.441ab63d.js"><link rel="prefetch" href="/assets/js/48.2cba60c1.js"><link rel="prefetch" href="/assets/js/49.fd892ab8.js"><link rel="prefetch" href="/assets/js/5.b66dd1f3.js"><link rel="prefetch" href="/assets/js/50.7392cf57.js"><link rel="prefetch" href="/assets/js/51.1ae23103.js"><link rel="prefetch" href="/assets/js/52.eba0b4eb.js"><link rel="prefetch" href="/assets/js/53.8ecc24ca.js"><link rel="prefetch" href="/assets/js/54.35bf48ff.js"><link rel="prefetch" href="/assets/js/55.c4b225c4.js"><link rel="prefetch" href="/assets/js/56.f75a73d5.js"><link rel="prefetch" href="/assets/js/57.8c48bf67.js"><link rel="prefetch" href="/assets/js/58.e897715e.js"><link rel="prefetch" href="/assets/js/59.9599231d.js"><link rel="prefetch" href="/assets/js/6.4dd9ca30.js"><link rel="prefetch" href="/assets/js/60.bbd96f86.js"><link rel="prefetch" href="/assets/js/61.2d26cfdb.js"><link rel="prefetch" href="/assets/js/62.2c5fb81b.js"><link rel="prefetch" href="/assets/js/63.dfd1449f.js"><link rel="prefetch" href="/assets/js/64.b7d24ec4.js"><link rel="prefetch" href="/assets/js/65.09b08b0d.js"><link rel="prefetch" href="/assets/js/66.870a05b9.js"><link rel="prefetch" href="/assets/js/67.3110d145.js"><link rel="prefetch" href="/assets/js/68.318402eb.js"><link rel="prefetch" href="/assets/js/69.9c3511c8.js"><link rel="prefetch" href="/assets/js/7.a44750a9.js"><link rel="prefetch" href="/assets/js/70.de3cfd0a.js"><link rel="prefetch" href="/assets/js/8.ca5cabab.js"><link rel="prefetch" href="/assets/js/9.e861b30f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b8bd58f1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">niping</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">HOME</a></div><div class="nav-item"><a href="/font/" class="nav-link router-link-active">前端</a></div><div class="nav-item"><a href="/computer/" class="nav-link">计算机</a></div><div class="nav-item"><a href="/other/" class="nav-link">个人学习笔记</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">关于我</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.instagram.com/nipingd/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  instagram
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/nipingd" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">HOME</a></div><div class="nav-item"><a href="/font/" class="nav-link router-link-active">前端</a></div><div class="nav-item"><a href="/computer/" class="nav-link">计算机</a></div><div class="nav-item"><a href="/other/" class="nav-link">个人学习笔记</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">关于我</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.instagram.com/nipingd/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  instagram
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/nipingd" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading open"><span>JS</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/font/JS/this、new、apply、call与bind.html" class="sidebar-link">this、new、apply、call与bind</a></li><li><a href="/font/JS/JS单线程、异步、同步.html" class="sidebar-link">JS单线程、异步、同步</a></li><li><a href="/font/JS/常用正则表达式备忘录.html" class="sidebar-link">常用正则表达式备忘录</a></li><li><a href="/font/JS/Object.defineProperty与Proxy理解整理.html" class="sidebar-link">Object.defineProperty与Proxy理解整理</a></li><li><a href="/font/JS/柯里化.html" class="sidebar-link">柯里化</a></li><li><a href="/font/JS/JS技巧.html" class="sidebar-link">JS技巧</a></li><li><a href="/font/JS/闭包.html" class="sidebar-link">闭包</a></li><li><a href="/font/JS/作用域与作用域链.html" class="sidebar-link">作用域与作用域链</a></li><li><a href="/font/JS/JS运行机制总结.html" class="sidebar-link">JS运行机制总结</a></li><li><a href="/font/JS/赋值、浅拷贝与深拷贝.html" class="sidebar-link">赋值、浅拷贝与深拷贝</a></li><li><a href="/font/JS/构造函数、原型、继承和原型链.html" class="sidebar-link">构造函数、原型、继承和原型链</a></li><li><a href="/font/JS/原生JS知识.html" class="sidebar-link">原生JS知识</a></li><li><a href="/font/JS/防抖与节流.html" class="sidebar-link">防抖与节流</a></li><li><a href="/font/JS/类型转换比较问题.html" class="sidebar-link">类型转换比较问题</a></li><li><a href="/font/JS/JS中有趣的事实.html" class="sidebar-link">JS中有趣的事实</a></li><li><a href="/font/JS/正则表达式必知必会.html" class="sidebar-link">正则表达式必知必会</a></li><li><a href="/font/JS/空对象与空数组相加问题.html" class="sidebar-link">空对象与空数组相加问题</a></li><li><a href="/font/JS/JS面试题.html" class="active sidebar-link">JS面试题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/font/JS/JS面试题.html#_1-浏览器控制台上会打印什么？" class="sidebar-link">1.浏览器控制台上会打印什么？</a></li><li class="sidebar-sub-header"><a href="/font/JS/JS面试题.html#_2-如果我们使用-let-或-const-代替-var，输出是否相同" class="sidebar-link">2.如果我们使用 let 或 const 代替 var，输出是否相同</a></li><li class="sidebar-sub-header"><a href="/font/JS/JS面试题.html#_3-“newarray”中有哪些元素？" class="sidebar-link">3.“newArray”中有哪些元素？</a></li><li class="sidebar-sub-header"><a href="/font/JS/JS面试题.html#_4-如果我们在浏览器控制台中运行-foo-函数，是否会导致堆栈溢出错误？" class="sidebar-link">4.如果我们在浏览器控制台中运行'foo'函数，是否会导致堆栈溢出错误？</a></li><li class="sidebar-sub-header"><a href="/font/JS/JS面试题.html#_5-如果在控制台中运行以下函数，页面-选项卡-的-ui-是否仍然响应" class="sidebar-link">5.如果在控制台中运行以下函数，页面(选项卡)的 UI 是否仍然响应</a></li><li class="sidebar-sub-header"><a href="/font/JS/JS面试题.html#_6-我们能否以某种方式为下面的语句使用展开运算而不导致类型错误" class="sidebar-link">6.我们能否以某种方式为下面的语句使用展开运算而不导致类型错误</a></li><li class="sidebar-sub-header"><a href="/font/JS/JS面试题.html#_7-运行以下代码片段时，控制台上会打印什么？" class="sidebar-link">7.运行以下代码片段时，控制台上会打印什么？</a></li><li class="sidebar-sub-header"><a href="/font/JS/JS面试题.html#_8-xgetter-会打印什么值？" class="sidebar-link">8.xGetter() 会打印什么值？</a></li><li class="sidebar-sub-header"><a href="/font/JS/JS面试题.html#_9-下面的代码将输出什么到控制台，为什么？" class="sidebar-link">9.下面的代码将输出什么到控制台，为什么？</a></li><li class="sidebar-sub-header"><a href="/font/JS/JS面试题.html#_10-下面的代码将输出什么到控制台，为什么？" class="sidebar-link">10.下面的代码将输出什么到控制台，为什么？</a></li><li class="sidebar-sub-header"><a href="/font/JS/JS面试题.html#_11-封装javascript源文件的全部内容到一个函数块有什么意义及理由？" class="sidebar-link">11.封装JavaScript源文件的全部内容到一个函数块有什么意义及理由？</a></li><li class="sidebar-sub-header"><a href="/font/JS/JS面试题.html#_12-在javascript源文件的开头包含-use-strict-有什么意义和好处？" class="sidebar-link">12.在JavaScript源文件的开头包含 use strict 有什么意义和好处？</a></li><li class="sidebar-sub-header"><a href="/font/JS/JS面试题.html#_13-考虑以下两个函数。它们会返回相同的东西吗？-为什么相同或为什么不相同？" class="sidebar-link">13.考虑以下两个函数。它们会返回相同的东西吗？ 为什么相同或为什么不相同？</a></li><li class="sidebar-sub-header"><a href="/font/JS/JS面试题.html#_14-nan-是什么？它的类型是什么？你如何可靠地测试一个值是否等于-nan-？" class="sidebar-link">14.NaN 是什么？它的类型是什么？你如何可靠地测试一个值是否等于 NaN ？</a></li><li class="sidebar-sub-header"><a href="/font/JS/JS面试题.html#_15-讨论写函数-isinteger-x-的可能方法，用于确定x是否是整数。" class="sidebar-link">15.讨论写函数 isInteger(x) 的可能方法，用于确定x是否是整数。</a></li><li class="sidebar-sub-header"><a href="/font/JS/JS面试题.html#_16-写一个简单的函数（少于80个字符），要求返回一个布尔值指明字符串是否为回文结构。" class="sidebar-link">16.写一个简单的函数（少于80个字符），要求返回一个布尔值指明字符串是否为回文结构。</a></li><li class="sidebar-sub-header"><a href="/font/JS/JS面试题.html#_17-写一个-sum方法，在使用下面任一语法调用时，都可以正常工作。" class="sidebar-link">17.写一个 sum方法，在使用下面任一语法调用时，都可以正常工作。</a></li><li class="sidebar-sub-header"><a href="/font/JS/JS面试题.html#_18-请看下面的代码片段：" class="sidebar-link">18.请看下面的代码片段：</a></li><li class="sidebar-sub-header"><a href="/font/JS/JS面试题.html#_19-下面的代码将输出什么到控制台，为什么？" class="sidebar-link">19.下面的代码将输出什么到控制台，为什么？</a></li><li class="sidebar-sub-header"><a href="/font/JS/JS面试题.html#_20-下面的代码将输出什么到控制台，为什么？" class="sidebar-link">20.下面的代码将输出什么到控制台，为什么？</a></li><li class="sidebar-sub-header"><a href="/font/JS/JS面试题.html#_21-下面的递归代码在数组列表偏大的情况下会导致堆栈溢出。在保留递归模式的基础上，你怎么解决这个问题？" class="sidebar-link">21.下面的递归代码在数组列表偏大的情况下会导致堆栈溢出。在保留递归模式的基础上，你怎么解决这个问题？</a></li><li class="sidebar-sub-header"><a href="/font/JS/JS面试题.html#_22-javascript中的“闭包”是什么？请举一个例子。" class="sidebar-link">22.JavaScript中的“闭包”是什么？请举一个例子。</a></li><li class="sidebar-sub-header"><a href="/font/JS/JS面试题.html#_23-下面的代码将输出什么：" class="sidebar-link">23.下面的代码将输出什么：</a></li><li class="sidebar-sub-header"><a href="/font/JS/JS面试题.html#_24-以下代码行将输出什么到控制台？" class="sidebar-link">24.以下代码行将输出什么到控制台？</a></li><li class="sidebar-sub-header"><a href="/font/JS/JS面试题.html#_25-以下代码将输出什么？并解释你的答案。" class="sidebar-link">25.以下代码将输出什么？并解释你的答案。</a></li><li class="sidebar-sub-header"><a href="/font/JS/JS面试题.html#_26-下面的代码将输出什么到控制台，为什么：" class="sidebar-link">26.下面的代码将输出什么到控制台，为什么：</a></li><li class="sidebar-sub-header"><a href="/font/JS/JS面试题.html#_27-创建一个给定页面上的一个dom元素，就会去访问元素本身及其所有子元素（不只是它的直接子元素）的函数。对于每个被访问的元素，函数应该传递元素到提供的回调函数。" class="sidebar-link">27.创建一个给定页面上的一个DOM元素，就会去访问元素本身及其所有子元素（不只是它的直接子元素）的函数。对于每个被访问的元素，函数应该传递元素到提供的回调函数。</a></li><li class="sidebar-sub-header"><a href="/font/JS/JS面试题.html#_28-new的实现原理是什么？" class="sidebar-link">28. new的实现原理是什么？</a></li><li class="sidebar-sub-header"><a href="/font/JS/JS面试题.html#_29-如何正确判断this的指向？" class="sidebar-link">29. 如何正确判断this的指向？</a></li><li class="sidebar-sub-header"><a href="/font/JS/JS面试题.html#_30-实现一个深拷贝" class="sidebar-link">30.实现一个深拷贝</a></li></ul></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>ES6</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>浏览器网络</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>CSS</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>vue</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>node</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>其他</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page"> <div class="content"><h2 id="_1-浏览器控制台上会打印什么？"><a href="#_1-浏览器控制台上会打印什么？" aria-hidden="true" class="header-anchor">#</a> 1.浏览器控制台上会打印什么？</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ??</span>
    <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="问题1：-undefined"><a href="#问题1：-undefined" aria-hidden="true" class="header-anchor">#</a> 问题1： <code>undefined</code></h4> <h4 id="解析："><a href="#解析：" aria-hidden="true" class="header-anchor">#</a> 解析：</h4> <p>使用<code>var</code>关键字声明的变量在JavaScript中会被提升，并在内存中分配值<code>undefined</code>。 但初始化恰发生在你给变量赋值的地方。 另外，<code>var</code>声明的变量是<a href="https://link.juejin.im?target=https%3A%2F%2F2ality.com%2F2011%2F02%2Fjavascript-variable-scoping-and-its.html" target="_blank" rel="noopener noreferrer">函数作用域的<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，而<code>let</code>和<code>const</code>是块作用域的。 所以，这就是这个过程的样子：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">// 全局使用域</span>
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">// var a 的声明将被提升到到函数的顶部。</span>
<span class="token comment">// 比如:var a</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 打印 undefined</span>

<span class="token comment">// 实际初始化值20只发生在这里</span>
   <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span> <span class="token comment">// local scope</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="_2-如果我们使用-let-或-const-代替-var，输出是否相同"><a href="#_2-如果我们使用-let-或-const-代替-var，输出是否相同" aria-hidden="true" class="header-anchor">#</a> 2.如果我们使用 let 或 const 代替 var，输出是否相同</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ??</span>
    <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="问题-2：referenceerror：a-undefined。"><a href="#问题-2：referenceerror：a-undefined。" aria-hidden="true" class="header-anchor">#</a> 问题 2：<code>ReferenceError：a undefined</code>。</h4> <h4 id="解析：-2"><a href="#解析：-2" aria-hidden="true" class="header-anchor">#</a> 解析：</h4> <p><code>let</code>和<code>const</code>声明可以让变量在其作用域上受限于它所使用的块、语句或表达式。与<code>var</code>不同的是，这些变量没有被提升，并且有一个所谓的<strong>暂时死区(TDZ)</strong>。试图访问<strong>TDZ</strong>中的这些变量将引发<code>ReferenceError</code>，因为只有在执行到达声明时才能访问它们。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">// 全局使用域</span>
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// TDZ 开始</span>

<span class="token comment">// 创建了未初始化的'a'</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ReferenceError</span>

<span class="token comment">// TDZ结束，'a'仅在此处初始化，值为20</span>
    <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>下表概述了与JavaScript中使用的不同关键字声明的变量对应的提升行为和使用域：</p> <p><img src="/assets/img/1565361263389.5deecee6.png" alt="1565361263389"></p> <h2 id="_3-“newarray”中有哪些元素？"><a href="#_3-“newarray”中有哪些元素？" aria-hidden="true" class="header-anchor">#</a> 3.“newArray”中有哪些元素？</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> array <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span><span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 array<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> newArray <span class="token operator">=</span> array<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">el</span> <span class="token operator">=&gt;</span> <span class="token function">el</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newArray<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ??   </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="问题-3-3-3-3"><a href="#问题-3-3-3-3" aria-hidden="true" class="header-anchor">#</a> 问题 3: <code>[3, 3, 3]</code></h4> <h4 id="解析：-3"><a href="#解析：-3" aria-hidden="true" class="header-anchor">#</a> 解析：</h4> <p>在<code>for</code>循环的头部声明带有<code>var</code>关键字的变量会为该变量创建单个绑定（存储空间）。 阅读更多关于<a href="https://link.juejin.im?target=http%3A%2F%2Fdmitrysoshnikov.com%2Fecmascript%2Fchapter-6-closures%2F" target="_blank" rel="noopener noreferrer">闭包<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>的信息。 让我们再看一次for循环。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 误解作用域:认为存在块级作用域</span>
<span class="token keyword">var</span> array <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 三个箭头函数体中的每个`'i'`都指向相同的绑定，</span>
  <span class="token comment">// 这就是为什么它们在循环结束时返回相同的值'3'。</span>
  array<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> newArray <span class="token operator">=</span> array<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">el</span> <span class="token operator">=&gt;</span> <span class="token function">el</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newArray<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [3, 3, 3]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>如果使用 <code>let</code> 声明一个具有块级作用域的变量，则为每个循环迭代创建一个新的绑定。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 使用ES6块级作用域</span>
<span class="token keyword">var</span> array <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 这一次，每个'i'指的是一个新的的绑定，并保留当前的值。</span>
 <span class="token comment">// 因此，每个箭头函数返回一个不同的值。</span>
  array<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> newArray <span class="token operator">=</span> array<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">el</span> <span class="token operator">=&gt;</span> <span class="token function">el</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newArray<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [0, 1, 2]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>解决这个问题的另一种方法是使用<a href="https://link.juejin.im?target=http%3A%2F%2Fdmitrysoshnikov.com%2Fecmascript%2Fchapter-6-closures%2F" target="_blank" rel="noopener noreferrer">闭包<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> array <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  array<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> x<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> newArray <span class="token operator">=</span> array<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">el</span> <span class="token operator">=&gt;</span> <span class="token function">el</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newArray<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [0, 1, 2]  </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="_4-如果我们在浏览器控制台中运行-foo-函数，是否会导致堆栈溢出错误？"><a href="#_4-如果我们在浏览器控制台中运行-foo-函数，是否会导致堆栈溢出错误？" aria-hidden="true" class="header-anchor">#</a> 4.如果我们在浏览器控制台中运行'foo'函数，是否会导致堆栈溢出错误？</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span>foo<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 是否存在堆栈溢出错误?</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>    
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="问题4-不会溢出"><a href="#问题4-不会溢出" aria-hidden="true" class="header-anchor">#</a> 问题4 : 不会溢出</h4> <h4 id="解析：-4"><a href="#解析：-4" aria-hidden="true" class="header-anchor">#</a> 解析：</h4> <p>JavaScript并发模型基于“事件循环”。 当我们说“浏览器是 JS 的家”时我真正的意思是浏览器提供运行时环境来执行我们的JS代码。</p> <p>浏览器的主要组件包括<strong>调用堆栈</strong>，<strong>事件循环</strong>**，任务队列<strong>和</strong>Web API**。 像<code>setTimeout</code>，<code>setInterval</code>和<code>Promise</code>这样的全局函数不是JavaScript的一部分，而是 Web API 的一部分。 JavaScript 环境的可视化形式如下所示：</p> <p><img src="/assets/img/1565361602465.e9f8f264.png" alt="1565361602465"></p> <p>JS调用栈是后进先出(LIFO)的。引擎每次从堆栈中取出一个函数，然后从上到下依次运行代码。每当它遇到一些异步代码，如<code>setTimeout</code>，它就把它交给<code>Web API</code>(箭头1)。因此，每当事件被触发时，<code>callback</code> 都会被发送到任务队列（箭头2）。</p> <p><strong>事件循环(Event loop)不断地监视任务队列(Task Queue)，并按它们排队的顺序一次处理一个回调。每当调用堆栈(call stack)为空时，Event loop获取回调并将其放入堆栈(stack )</strong>(箭头3)中进行处理。请记住，如果调用堆栈不是空的，<strong>则事件循环不会将任何回调推入堆栈</strong>。</p> <p>现在，有了这些知识，让我们来回答前面提到的问题：</p> <h3 id="步骤"><a href="#步骤" aria-hidden="true" class="header-anchor">#</a> 步骤</h3> <ol><li>调用 <code>foo()</code>会将<code>foo</code>函数放入<strong>调用堆栈(call stack)</strong>。</li> <li>在处理内部代码时，JS引擎遇到<code>setTimeout</code>。</li> <li>然后将<code>foo</code>回调函数传递给<strong>WebAPIs</strong>(箭头1)并从函数返回，调用堆栈再次为空</li> <li>计时器被设置为0，因此<code>foo</code>将被发送到<strong>任务队列</strong>(箭头2)。</li> <li>由于调用堆栈是空的，事件循环将选择<code>foo</code>回调并将其推入调用堆栈进行处理。</li> <li>进程再次重复，堆栈不会溢出。</li></ol> <p>运行示意图如下所示：</p> <p><img src="/assets/img/1565361796134.bbb22d79.png" alt="1565361796134"></p> <h2 id="_5-如果在控制台中运行以下函数，页面-选项卡-的-ui-是否仍然响应"><a href="#_5-如果在控制台中运行以下函数，页面-选项卡-的-ui-是否仍然响应" aria-hidden="true" class="header-anchor">#</a> 5.如果在控制台中运行以下函数，页面(选项卡)的 UI 是否仍然响应</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="问题5-不会响应"><a href="#问题5-不会响应" aria-hidden="true" class="header-anchor">#</a> 问题5 : 不会响应</h4> <h4 id="解析：-5"><a href="#解析：-5" aria-hidden="true" class="header-anchor">#</a> 解析：</h4> <p>大多数时候，开发人员假设在<strong>事件循环图中只有一个任务队列。但事实并非如此，我们可以有多个任务队列。由浏览器选择其中的一个队列并在该队列中处理回调</strong>。</p> <p>在底层来看，JavaScript中有宏任务和微任务。<code>setTimeout</code>回调是<strong>宏任务</strong>，而<code>Promise</code>回调是<strong>微任务</strong>。</p> <p>主要的区别在于他们的执行方式。宏任务在单个循环周期中一次一个地推入堆栈，但是微任务队列总是在执行后返回到事件循环之前清空。因此，如果你以处理条目的速度向这个队列添加条目，那么你就永远在处理微任务。只有当微任务队列为空时，事件循环才会重新渲染页面、</p> <p>现在，当你在控制台中运行以下代码段</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>每次调用'<code>foo</code>'都会继续在微任务队列上添加另一个'<code>foo</code>'回调，因此事件循环无法继续处理其他事件（滚动，单击等），直到该队列完全清空为止。 因此，它会阻止渲染。</p> <h2 id="_6-我们能否以某种方式为下面的语句使用展开运算而不导致类型错误"><a href="#_6-我们能否以某种方式为下面的语句使用展开运算而不导致类型错误" aria-hidden="true" class="header-anchor">#</a> 6.我们能否以某种方式为下面的语句使用展开运算而不导致类型错误</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> x<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> z<span class="token punctuation">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">[</span><span class="token operator">...</span>obj<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// TypeError </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="问题6-会导致typeerror错误"><a href="#问题6-会导致typeerror错误" aria-hidden="true" class="header-anchor">#</a> 问题6 : 会导致TypeError错误</h4> <h4 id="解析：-6"><a href="#解析：-6" aria-hidden="true" class="header-anchor">#</a> 解析：</h4> <p><a href="https://link.juejin.im?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FJavaScript%2FReference%2FOperators%2FSpread_syntax" target="_blank" rel="noopener noreferrer">展开语法<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 和 <a href="https://link.juejin.im?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FJavaScript%2FReference%2FStatements%2Ffor...of" target="_blank" rel="noopener noreferrer">for-of<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 语句遍历<code>iterable</code>对象定义要遍历的数据。<code>Array</code> 或<code>Map</code> 是具有默认迭代行为的内置迭代器。对象不是可迭代的，但是可以通过使用<a href="https://link.juejin.im?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FJavaScript%2FReference%2FIteration_protocols%23The_iterable_protocol" target="_blank" rel="noopener noreferrer">iterable<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>和<a href="https://link.juejin.im?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FJavaScript%2FReference%2FIteration_protocols%23The_iterator_protocol" target="_blank" rel="noopener noreferrer">iterator<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>协议使它们可迭代。</p> <p>在<strong>Mozilla</strong>文档中，如果一个对象实现了<code>@@iterator</code>方法，那么它就是可迭代的，这意味着这个对象(或者它原型链上的一个对象)必须有一个带有<code>@@iterator</code>键的属性，这个键可以通过常量<code>Symbol.iterator</code>获得。</p> <p>上述语句可能看起来有点冗长，但是下面的示例将更有意义：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> x<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> z<span class="token punctuation">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
obj<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  
  <span class="token comment">// iterator 是一个具有 next 方法的对象，</span>
  <span class="token comment">// 它的返回至少有一个对象</span>
  <span class="token comment">// 两个属性：value＆done。</span>

  <span class="token comment">// 返回一个 iterator 对象</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">next</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_countDown <span class="token operator">===</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> lastValue <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_countDown<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span> value<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_countDown<span class="token punctuation">,</span> done<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>_countDown <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_countDown <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span> value<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_countDown<span class="token punctuation">,</span> done<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    _countDown<span class="token punctuation">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">[</span><span class="token operator">...</span>obj<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 打印 [1, 2, 3]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>还可以使用 <a href="https://link.juejin.im?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FJavaScript%2FReference%2FStatements%2Ffunction*" target="_blank" rel="noopener noreferrer">generator<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 函数来定制对象的迭代行为：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>x<span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">,</span> z<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">}</span>
obj<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">yield</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">yield</span> <span class="token number">2</span><span class="token punctuation">;</span>
  <span class="token keyword">yield</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">[</span><span class="token operator">...</span>obj<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 打印 [1, 2, 3]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="_7-运行以下代码片段时，控制台上会打印什么？"><a href="#_7-运行以下代码片段时，控制台上会打印什么？" aria-hidden="true" class="header-anchor">#</a> 7.运行以下代码片段时，控制台上会打印什么？</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">setPrototypeOf</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token punctuation">{</span>c<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'d'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> value<span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">,</span> enumerable<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// what properties will be printed when we run the for-in loop?</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> prop <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>prop<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="问题7-a-b-c"><a href="#问题7-a-b-c" aria-hidden="true" class="header-anchor">#</a> 问题7 : a, b, c</h4> <h4 id="解析：-7"><a href="#解析：-7" aria-hidden="true" class="header-anchor">#</a> 解析：</h4> <p><code>for-in</code>循环遍历对象本身的<a href="https://link.juejin.im?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FJavaScript%2FEnumerability_and_ownership_of_properties" target="_blank" rel="noopener noreferrer">可枚举属性<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>以及对象从其原型继承的属性。 可枚举属性是可以在<code>for-in</code>循环期间包含和访问的属性。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> descriptor <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>descriptor<span class="token punctuation">.</span>enumerable<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>descriptor<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// { value: 1, writable: true, enumerable: true, configurable: true }</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>现在你已经掌握了这些知识，应该很容易理解为什么我们的代码要打印这些特定的属性</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">//a，b 都是 enumerables 属性</span>

<span class="token comment">// 将{c：3}设置为'obj'的原型，并且我们知道</span>
<span class="token comment">// for-in 循环也迭代 obj 继承的属性</span>
<span class="token comment">// 从它的原型，'c'也可以被访问。</span>
Object<span class="token punctuation">.</span><span class="token function">setPrototypeOf</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token punctuation">{</span> c<span class="token punctuation">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 我们在'obj'中定义了另外一个属性'd'，但是 </span>
<span class="token comment">// 将'enumerable'设置为false。 这意味着'd'将被忽略。</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">&quot;d&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> value<span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">,</span> enumerable<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> prop <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>prop<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 打印</span>
<span class="token comment">// a</span>
<span class="token comment">// b</span>
<span class="token comment">// c</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h2 id="_8-xgetter-会打印什么值？"><a href="#_8-xgetter-会打印什么值？" aria-hidden="true" class="header-anchor">#</a> 8.xGetter() 会打印什么值？</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token punctuation">{</span>
  x<span class="token punctuation">:</span> <span class="token number">90</span><span class="token punctuation">,</span>
  <span class="token function-variable function">getX</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
foo<span class="token punctuation">.</span><span class="token function">getX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// prints 90</span>
<span class="token keyword">var</span> xGetter <span class="token operator">=</span> foo<span class="token punctuation">.</span>getX<span class="token punctuation">;</span>
<span class="token function">xGetter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// prints ??</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="问题8-10"><a href="#问题8-10" aria-hidden="true" class="header-anchor">#</a> 问题8 : 10</h4> <h4 id="解析：-8"><a href="#解析：-8" aria-hidden="true" class="header-anchor">#</a> 解析：</h4> <p>在全局范围内初始化<code>x</code>时，它成为window对象的属性(不是严格的模式)。看看下面的代码:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">// global scope</span>
<span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token punctuation">{</span>
  x<span class="token punctuation">:</span> <span class="token number">90</span><span class="token punctuation">,</span>
  <span class="token function-variable function">getX</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
foo<span class="token punctuation">.</span><span class="token function">getX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// prints 90</span>
<span class="token keyword">let</span> xGetter <span class="token operator">=</span> foo<span class="token punctuation">.</span>getX<span class="token punctuation">;</span>
<span class="token function">xGetter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// prints 10</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>咱们可以断言：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>window<span class="token punctuation">.</span>x <span class="token operator">===</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>this</code> 始终指向调用方法的对象。因此，在<code>foo.getx()</code>的例子中，它指向<code>foo</code>对象，返回<code>90</code>的值。而在<code>xGetter()</code>的情况下，<code>this</code>指向 window对象, 返回 <strong>window</strong> 中的<code>x</code>的值，即<code>10</code>。</p> <p>要获取 <code>foo.x</code>的值，可以通过使用<code>Function.prototype.bind</code>将<code>this</code>的值绑定到<code>foo</code>对象来创建新函数。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> getFooX <span class="token operator">=</span> foo<span class="token punctuation">.</span><span class="token function">getX</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">getFooX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 90</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>作者：前端小智</p> <p>链接：https://juejin.im/post/5d2d146bf265da1b9163c5c9</p> <p>来源：掘金著作权归作者所有。</p> <p>下面的转载自：http://www.codeceo.com/article/25-essential-javascript-interview-questions.html</p> <h2 id="_9-下面的代码将输出什么到控制台，为什么？"><a href="#_9-下面的代码将输出什么到控制台，为什么？" aria-hidden="true" class="header-anchor">#</a> 9.下面的代码将输出什么到控制台，为什么？</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">var</span> a <span class="token operator">=</span> b <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;a defined? &quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> a <span class="token operator">!==</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;b defined? &quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> b <span class="token operator">!==</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>由于 <code>a</code> 和 <code>b</code> 都定义在函数的封闭范围内，并且都始于 <code>var</code>关键字，大多数JavaScript开发人员期望 <code>typeof a</code> 和 <code>typeof b</code> 在上面的例子中都是undefined。</p> <p>然而，事实并非如此。这里的问题是，大多数开发人员将语句 <code>var a = b = 3;</code> 错误地理解为是以下声明的简写：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> b<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>但事实上，<code>var a = b = 3;</code> 实际是以下声明的简写：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>b <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> b<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>因此（如果你不使用严格模式的话），该代码段的输出是：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>a defined<span class="token operator">?</span> <span class="token boolean">false</span>
b defined<span class="token operator">?</span> <span class="token boolean">true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>但是， <code>b</code> 如何才能被定义在封闭函数的范围之外呢？是的，既然语句 <code>var a = b = 3;</code> 是语句 <code>b = 3;</code> 和 <code>var a = b;</code>的简写， <code>b</code> 最终成为了一个全局变量（因为它没有前缀 <code>var</code> 关键字），因此仍然在范围内甚至封闭函数之外。</p> <p>需要注意的是，在严格模式下（即使用 <a href="http://www.w3schools.com/js/js_strict.asp" target="_blank" rel="noopener noreferrer"><code>use strict</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>），语句<code>var a = b = 3;</code> 将生成<code>ReferenceError: b is not defined</code>的运行时错误，从而避免任何否则可能会导致的headfakes /bug。 （还是你为什么应该理所当然地在代码中使用 <code>use strict</code> 的最好例子！）</p> <h2 id="_10-下面的代码将输出什么到控制台，为什么？"><a href="#_10-下面的代码将输出什么到控制台，为什么？" aria-hidden="true" class="header-anchor">#</a> 10.下面的代码将输出什么到控制台，为什么？</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> myObject <span class="token operator">=</span> <span class="token punctuation">{</span>
    foo<span class="token punctuation">:</span> <span class="token string">&quot;bar&quot;</span><span class="token punctuation">,</span>
    <span class="token function-variable function">func</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> self <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;outer func:  this.foo = &quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;outer func:  self.foo = &quot;</span> <span class="token operator">+</span> self<span class="token punctuation">.</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;inner func:  this.foo = &quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;inner func:  self.foo = &quot;</span> <span class="token operator">+</span> self<span class="token punctuation">.</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
myObject<span class="token punctuation">.</span><span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>上面的代码将输出以下内容到控制台：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>outer func<span class="token punctuation">:</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>foo <span class="token operator">=</span> bar
outer func<span class="token punctuation">:</span>  self<span class="token punctuation">.</span>foo <span class="token operator">=</span> bar
inner func<span class="token punctuation">:</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>foo <span class="token operator">=</span> <span class="token keyword">undefined</span>
inner func<span class="token punctuation">:</span>  self<span class="token punctuation">.</span>foo <span class="token operator">=</span> bar
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>在外部函数中， <code>this</code> 和<code>self</code> 两者都指向了 <code>myObject</code>，因此两者都可以正确地引用和访问 <code>foo</code>。</p> <p>在内部函数中， <code>this</code> 不再指向 <code>myObject</code>。其结果是，<code>this.foo</code> 没有在内部函数中被定义，相反，指向到本地的变量<code>self</code> 保持在范围内，并且可以访问。 （在ECMA 5之前，在内部函数中的<code>this</code> 将指向全局的 <code>window</code> 对象；反之，因为作为ECMA 5，内部函数中的功能<code>this</code> 是未定义的。）</p> <h2 id="_11-封装javascript源文件的全部内容到一个函数块有什么意义及理由？"><a href="#_11-封装javascript源文件的全部内容到一个函数块有什么意义及理由？" aria-hidden="true" class="header-anchor">#</a> 11.封装JavaScript源文件的全部内容到一个函数块有什么意义及理由？</h2> <p>这是一个越来越普遍的做法，被许多流行的JavaScript库（jQuery，Node.js等）采用。这种技术创建了一个围绕文件全部内容的<a href="http://www.codeceo.com/article/javascript-bibao.html" target="_blank" rel="noopener noreferrer">闭包<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，也许是最重要的是，创建了一个私有的命名空间，从而有助于避免不同JavaScript模块和库之间潜在的名称冲突。</p> <p>这种技术的另一个特点是，允许一个易于引用的（假设更短的）别名用于全局变量。</p> <h2 id="_12-在javascript源文件的开头包含-use-strict-有什么意义和好处？"><a href="#_12-在javascript源文件的开头包含-use-strict-有什么意义和好处？" aria-hidden="true" class="header-anchor">#</a> 12.在JavaScript源文件的开头包含 <code>use strict</code> 有什么意义和好处？</h2> <p>对于这个问题，既简要又最重要的答案是，<code>use strict</code> 是一种在<strong>JavaScript代码运行时自动实行更严格解析和错误处理</strong>的方法。那些被忽略或默默失败了的代码错误，会产生错误或抛出异常。通常而言，这是一个很好的做法。</p> <div class="tip custom-block"><p class="custom-block-title">严格模式的一些主要优点包括：</p> <ul><li><strong>使调试更加容易</strong>。那些被忽略或默默失败了的代码错误，会产生错误或抛出异常，因此尽早提醒你代码中的问题，你才能更快地指引到它们的源代码。</li> <li><strong>防止意外的全局变量</strong>。如果没有严格模式，将值分配给一个未声明的变量会自动创建该名称的全局变量。这是JavaScript中最常见的错误之一。在严格模式下，这样做的话会抛出错误。</li> <li><strong>消除 <code>this</code> 强制</strong>。如果没有严格模式，引用null或未定义的值到 <code>this</code> 值会自动强制到全局变量。这可能会导致许多令人头痛的问题和让人恨不得拔自己头发的bug。在严格模式下，引用 null或未定义的 <code>this</code> 值会抛出错误。</li> <li><strong>不允许重复的属性名称或参数值</strong>。当检测到对象（例如，<code>var object = {foo: &quot;bar&quot;, foo: &quot;baz&quot;};</code>）中重复命名的属性，或检测到函数中（例如，<code>function foo(val1, val2, val1){}</code>）重复命名的参数时，严格模式会抛出错误，因此捕捉几乎可以肯定是代码中的bug可以避免浪费大量的跟踪时间。</li> <li><strong>使<code>eval()</code> 更安全</strong>。在严格模式和非严格模式下，<code>eval()</code> 的行为方式有所不同。最显而易见的是，在严格模式下，变量和声明在 <code>eval()</code> 语句内部的函数不会在包含范围内创建（它们会在非严格模式下的包含范围中被创建，这也是一个常见的问题源）。</li> <li><strong>在 <code>delete</code>使用无效时抛出错误</strong>。<code>delete</code>操作符（用于从对象中删除属性）不能用在对象不可配置的属性上。当试图删除一个不可配置的属性时，非严格代码将默默地失败，而严格模式将在这样的情况下抛出异常。</li></ul></div> <h2 id="_13-考虑以下两个函数。它们会返回相同的东西吗？-为什么相同或为什么不相同？"><a href="#_13-考虑以下两个函数。它们会返回相同的东西吗？-为什么相同或为什么不相同？" aria-hidden="true" class="header-anchor">#</a> 13.考虑以下两个函数。它们会返回相同的东西吗？ 为什么相同或为什么不相同？</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">foo1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
      bar<span class="token punctuation">:</span> <span class="token string">&quot;hello&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">foo2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token keyword">return</span>
  <span class="token punctuation">{</span>
      bar<span class="token punctuation">:</span> <span class="token string">&quot;hello&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>出人意料的是，这两个函数返回的内容并不相同。更确切地说是：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;foo1 returns:&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">foo1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;foo2 returns:&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">foo2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>将产生：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>foo1 returns<span class="token punctuation">:</span>
Object <span class="token punctuation">{</span>bar<span class="token punctuation">:</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">}</span>
foo2 returns<span class="token punctuation">:</span>
<span class="token keyword">undefined</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>这不仅是令人惊讶，而且特别让人困惑的是， <code>foo2()</code>返回undefined却没有任何错误抛出。</p> <p>原因与这样一个事实有关，即分号在JavaScript中是一个可选项（尽管省略它们通常是非常糟糕的形式）。其结果就是，<strong>当碰到 <code>foo2()</code>中包含 <code>return</code>语句的代码行（代码行上没有其他任何代码），分号会立即自动插入到返回语句之后</strong>。</p> <p>也不会抛出错误，因为代码的其余部分是完全有效的，即使它没有得到调用或做任何事情（相当于它就是是一个未使用的代码块，定义了等同于字符串 <code>&quot;hello&quot;</code>的属性 <code>bar</code>）。</p> <p>这种行为也支持放置左括号于JavaScript代码行的末尾，而不是新代码行开头的约定。正如这里所示，这不仅仅只是JavaScript中的一个风格偏好。</p> <h2 id="_14-nan-是什么？它的类型是什么？你如何可靠地测试一个值是否等于-nan-？"><a href="#_14-nan-是什么？它的类型是什么？你如何可靠地测试一个值是否等于-nan-？" aria-hidden="true" class="header-anchor">#</a> 14.<code>NaN</code> 是什么？它的类型是什么？你如何可靠地测试一个值是否等于 <code>NaN</code> ？</h2> <p><code>NaN</code> 属性代表一个“不是数字”的值。这个特殊的值是因为运算不能执行而导致的，不能执行的原因要么是因为其中的运算对象之一非数字（例如， <code>&quot;abc&quot; / 4</code>），要么是因为运算的结果非数字（例如，除数为零）。</p> <p>虽然这看上去很简单，但 <code>NaN</code> 有一些令人惊讶的特点，如果你不知道它们的话，可能会导致令人头痛的bug。</p> <p>首先，虽然 <code>NaN</code> 意味着“不是数字”，但是它的类型，不管你信不信，是 <code>Number</code>：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token number">NaN</span> <span class="token operator">===</span> <span class="token string">&quot;number&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// logs &quot;true&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>此外， <code>NaN</code> 和任何东西比较——甚至是它自己本身！——结果是false：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">NaN</span> <span class="token operator">===</span> <span class="token number">NaN</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// logs &quot;false&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>一种半可靠的方法来测试一个数字是否等于 NaN，是使用内置函数 <code>isNaN()</code>，但即使使用 <code>isNaN()</code> 依然并非是一个完美的解决方案。</p> <p>一个更好的解决办法是使用 <code>value !== value</code>，如果值等于NaN，只会产生true。另外，ES6提供了一个新的 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isNaN" target="_blank" rel="noopener noreferrer"><code>Number.isNaN()</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 函数，这是一个不同的函数，并且比老的全局 <code>isNaN()</code> 函数更可靠。</p> <h2 id="_15-讨论写函数-isinteger-x-的可能方法，用于确定x是否是整数。"><a href="#_15-讨论写函数-isinteger-x-的可能方法，用于确定x是否是整数。" aria-hidden="true" class="header-anchor">#</a> 15.讨论写函数 <code>isInteger(x)</code> 的可能方法，用于确定x是否是整数。</h2> <p>这可能听起来是小菜一碟，但事实上，这很琐碎，因为ECMAScript 6引入了一个新的正以此为目的 <code>Number.isInteger()</code> 函数。然而，之前的ECMAScript 6，会更复杂一点，因为没有提供类似的 <code>Number.isInteger()</code> 方法。</p> <p>问题是，在ECMAScript规格说明中，整数只概念上存在：即，数字值总是存储为浮点值。</p> <p>考虑到这一点，最简单又最干净的ECMAScript6之前的解决方法（同时也非常稳健地返回 <code>false</code> ，即使一个非数字的值，如字符串或 <code>null</code> ，被传递给函数）如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">isInteger</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token punctuation">(</span>x<span class="token operator">^</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">===</span> x<span class="token punctuation">;</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>下面的解决方法也是可行的，虽然不如上面那个方法优雅：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">isInteger</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">===</span> x<span class="token punctuation">;</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>请注意 <code>Math.ceil()</code> 和 <code>Math.floor()</code> 在上面的实现中等同于 <code>Math.round()</code>。</p> <p>或：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">isInteger</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> x <span class="token operator">===</span> <span class="token string">'number'</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>x <span class="token operator">%</span> <span class="token number">1</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>相当普遍的一个不正确的解决方案是：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">isInteger</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">===</span> x<span class="token punctuation">;</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>虽然这个以 <code>parseInt</code>函数为基础的方法在 <code>x</code> 取许多值时都能工作良好，但一旦 <code>x</code> 取值相当大的时候，就会无法正常工作。问题在于 <code>parseInt()</code> 在解析数字之前强制其第一个参数到字符串。因此，一旦数目变得足够大，它的字符串就会表达为指数形式（例如， <code>1e+21</code>）。因此，<code>parseInt()</code> 函数就会去解析 <code>1e+21</code>，但当到达 <code>e</code>字符串的时候，就会停止解析，因此只会返回值 <code>1</code>。注意：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&gt;</span> <span class="token function">String</span><span class="token punctuation">(</span><span class="token number">1000000000000000000000</span><span class="token punctuation">)</span>
<span class="token string">'1e+21'</span>

<span class="token operator">&gt;</span> <span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token number">1000000000000000000000</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
<span class="token number">1</span>

<span class="token operator">&gt;</span> <span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token number">1000000000000000000000</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token number">1000000000000000000000</span>
<span class="token boolean">false</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="_16-写一个简单的函数（少于80个字符），要求返回一个布尔值指明字符串是否为回文结构。"><a href="#_16-写一个简单的函数（少于80个字符），要求返回一个布尔值指明字符串是否为回文结构。" aria-hidden="true" class="header-anchor">#</a> 16.写一个简单的函数（少于80个字符），要求返回一个布尔值指明字符串是否为回文结构。</h2> <p>下面这个函数在 <code>str</code> 是回文结构的时候返回true，否则，返回false。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">isPalindrome</span><span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    str <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/\W/g</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>str <span class="token operator">==</span> str<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>例如：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">isPalindrome</span><span class="token punctuation">(</span><span class="token string">&quot;level&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                   <span class="token comment">// logs 'true'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">isPalindrome</span><span class="token punctuation">(</span><span class="token string">&quot;levels&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                  <span class="token comment">// logs 'false'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">isPalindrome</span><span class="token punctuation">(</span><span class="token string">&quot;A car, a man, a maraca&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// logs 'true'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="_17-写一个-sum方法，在使用下面任一语法调用时，都可以正常工作。"><a href="#_17-写一个-sum方法，在使用下面任一语法调用时，都可以正常工作。" aria-hidden="true" class="header-anchor">#</a> 17.写一个 <code>sum</code>方法，在使用下面任一语法调用时，都可以正常工作。</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// Outputs 5</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Outputs 5</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>（至少）有两种方法可以做到：</p> <p><strong>方法1</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>arguments<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> arguments<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> arguments<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>在JavaScript中，函数可以提供到 <code>arguments</code> 对象的访问，<code>arguments</code> 对象提供传递到函数的实际参数的访问。这使我们能够使用 <code>length</code> 属性来确定在运行时传递给函数的参数数量。</p> <p>如果传递两个参数，那么只需加在一起，并返回。</p> <p>否则，我们假设它被以 <code>sum(2)(3)</code>这样的形式调用，所以我们返回一个匿名函数，这个匿名函数合并了传递到 <code>sum()</code>的参数和传递给匿名函数的参数。</p> <p><strong>方法2</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>y <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>😄**当调用一个函数的时候，JavaScript不要求参数的数目匹配函数定义中的参数数量。如果传递的参数数量大于函数定义中参数数量，那么多余参数将简单地被忽略。另一方面，如果传递的参数数量小于函数定义中的参数数量，那么缺少的参数在函数中被引用时将会给一个 <code>undefined</code>值。**所以，在上面的例子中，简单地检查第2个参数是否未定义，就可以相应地确定函数被调用以及进行的方式。</p> <h2 id="_18-请看下面的代码片段："><a href="#_18-请看下面的代码片段：" aria-hidden="true" class="header-anchor">#</a> 18.请看下面的代码片段：</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  btn<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span><span class="token string">'Button '</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  btn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>btn<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>（a）当用户点击“Button 4”的时候会输出什么到控制台，为什么？（b）提供一个或多个备用的可按预期工作的实现方案。</p> <p>（a）无论用户点击什么按钮，数字5将总会输出到控制台。这是因为，当 <code>onclick</code> 方法被调用（对于任何按钮）的时候， <code>for</code> 循环已经结束，变量 <code>i</code> 已经获得了5的值。（面试者如果能够谈一谈有关如何执行上下文，可变对象，激活对象和内部“范围”属性贡有助于闭包行为，则可以加分）。</p> <p>（b）要让代码工作的关键是，通过传递到一个新创建的函数对象，在每次传递通过 <code>for</code> 循环时，捕捉到 <code>i</code> 值。下面是三种可能实现的方法：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  btn<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span><span class="token string">'Button '</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  btn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>btn<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>或者，你可以封装全部调用到在新匿名函数中的 <code>btn.addEventListener</code> ：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  btn<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span><span class="token string">'Button '</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    btn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>btn<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>也可以调用数组对象的本地 <code>forEach</code> 方法来替代 <code>for</code> 循环：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">,</span> <span class="token string">'d'</span><span class="token punctuation">,</span> <span class="token string">'e'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  btn<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span><span class="token string">'Button '</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  btn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>btn<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="_19-下面的代码将输出什么到控制台，为什么？"><a href="#_19-下面的代码将输出什么到控制台，为什么？" aria-hidden="true" class="header-anchor">#</a> 19.下面的代码将输出什么到控制台，为什么？</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> arr1 <span class="token operator">=</span> <span class="token string">&quot;john&quot;</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> arr2 <span class="token operator">=</span> arr1<span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> arr3 <span class="token operator">=</span> <span class="token string">&quot;jones&quot;</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
arr2<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>arr3<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;array 1: length=&quot;</span> <span class="token operator">+</span> arr1<span class="token punctuation">.</span>length <span class="token operator">+</span> <span class="token string">&quot; last=&quot;</span> <span class="token operator">+</span> arr1<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;array 2: length=&quot;</span> <span class="token operator">+</span> arr2<span class="token punctuation">.</span>length <span class="token operator">+</span> <span class="token string">&quot; last=&quot;</span> <span class="token operator">+</span> arr2<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>输出结果是：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token string">&quot;array 1: length=5 last=j,o,n,e,s&quot;</span>
<span class="token string">&quot;array 2: length=5 last=j,o,n,e,s&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>arr1</code> 和 <code>arr2</code> 在上述代码执行之后，两者相同了，原因是：</p> <ul><li><strong>调用数组对象的 <code>reverse()</code> 方法并不只返回反顺序的阵列，它也反转了数组本身的顺序</strong>（即，在这种情况下，指的是 <code>arr1</code>）。</li> <li><strong><code>reverse()</code> 方法返回一个到数组本身的引用（在这种情况下即，<code>arr1</code>）。其结果为，<code>arr2</code> 仅仅是一个到 <code>arr1</code>的😄引用（而不是副本）</strong>。因此，当对 <code>arr2</code>做了任何事情（即当我们调用 <code>arr2.push(arr3);</code>）时，<code>arr1</code> 也会受到影响，因为 <code>arr1</code> 和 <code>arr2</code> 引用的是同一个对象。</li></ul> <p>这里有几个侧面点有时候会让你在回答这个问题时，阴沟里翻船：</p> <p>传递数组到另一个数组的 <code>push()</code> 方法会让整个数组作为单个元素映射到数组的末端。其结果是，语句 <code>arr2.push(arr3);</code> <strong>在其整体中添加 <code>arr3</code> 作为一个单一的元素到 <code>arr2</code> 的末端</strong>（也就是说，它并没有连接两个数组，连接数组是 <code>concat()</code> 方法的目的）。</p> <p>和Python一样，JavaScript标榜数组方法调用中的负数下标，例如 <code>slice()</code> 可作为引用数组末尾元素的方法：例如，<strong>-1下标表示数组中的最后一个元素，等等。</strong></p> <h2 id="_20-下面的代码将输出什么到控制台，为什么？"><a href="#_20-下面的代码将输出什么到控制台，为什么？" aria-hidden="true" class="header-anchor">#</a> 20.下面的代码将输出什么到控制台，为什么？</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">+</span>  <span class="token string">&quot;2&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">+</span>  <span class="token operator">+</span><span class="token string">&quot;2&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">+</span>  <span class="token operator">-</span><span class="token string">&quot;1&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">+</span><span class="token string">&quot;1&quot;</span> <span class="token operator">+</span>  <span class="token string">&quot;1&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token string">&quot;A&quot;</span> <span class="token operator">-</span> <span class="token string">&quot;B&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token string">&quot;A&quot;</span> <span class="token operator">-</span> <span class="token string">&quot;B&quot;</span> <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>上面的代码将输出以下内容到控制台：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token string">&quot;122&quot;</span>
<span class="token string">&quot;32&quot;</span>
<span class="token string">&quot;02&quot;</span>
<span class="token string">&quot;112&quot;</span>
<span class="token string">&quot;NaN2&quot;</span>
<span class="token number">NaN</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>原因是…</p> <p>这里的根本问题是，JavaScript（ECMAScript）是一种弱类型语言，它可对值进行自动类型转换，以适应正在执行的操作。让我们通过上面的例子来说明这是如何做到的。</p> <p>例1：<code>1 + &quot;2&quot; + &quot;2&quot;</code> 输出：<code>&quot;122&quot;</code> 说明： <code>1 + &quot;2&quot;</code> 是执行的第一个操作。由于其中一个运算对象（<code>&quot;2&quot;</code>）是字符串，JavaScript会假设它需要执行字符串连接，因此，会将 <code>1</code> 的类型转换为 <code>&quot;1&quot;</code>， <code>1 + &quot;2&quot;</code>结果就是 <code>&quot;12&quot;</code>。然后， <code>&quot;12&quot; + &quot;2&quot;</code> 就是 <code>&quot;122&quot;</code>。</p> <p>例2： <code>1 + +&quot;2&quot; + &quot;2&quot;</code> 输出： <code>&quot;32&quot;</code> 说明：根据运算的顺序，要执行的第一个运算是 <code>+&quot;2&quot;</code>（第一个 <code>&quot;2&quot;</code> 前面的额外 <code>+</code> 被视为一元运算符）。因此，JavaScript将 <code>&quot;2&quot;</code> 的类型转换为数字，然后应用一元 <code>+</code> 号（即，将其视为一个正数）。其结果是，接下来的运算就是 <code>1 + 2</code> ，这当然是 <code>3</code>。然后我们需要在一个数字和一个字符串之间进行运算（即， <code>3</code> 和 <code>&quot;2&quot;</code>），同样的，JavaScript会将数值类型转换为字符串，并执行字符串的连接，产生 <code>&quot;32&quot;</code>。</p> <p>例3： <code>1 + -&quot;1&quot; + &quot;2&quot;</code> 输出： <code>&quot;02&quot;</code>  说明：这里的解释和前一个例子相同，除了此处的一元运算符是 <code>-</code> 而不是 <code>+</code>。先是 <code>&quot;1&quot;</code> 变为 <code>1</code>，然后当应用 <code>-</code> 时又变为了 <code>-1</code> ，然后将其与 <code>1</code>相加，结果为 <code>0</code>，再将其转换为字符串，连接最后的 <code>&quot;2&quot;</code> 运算对象，得到 <code>&quot;02&quot;</code>。</p> <p>例4： <code>+&quot;1&quot; + &quot;1&quot; + &quot;2&quot;</code> 输出： <code>&quot;112&quot;</code> 说明：虽然第一个运算对象 <code>&quot;1&quot;</code>因为前缀的一元 <code>+</code> 运算符类型转换为数值，但又立即转换回字符串，当连接到第二个运算对象 <code>&quot;1&quot;</code> 的时候，然后又和最后的运算对象<code>&quot;2&quot;</code> 连接，产生了字符串 <code>&quot;112&quot;</code>。</p> <p>例5： <code>&quot;A&quot; - &quot;B&quot; + &quot;2&quot;</code> 输出： <code>&quot;NaN2&quot;</code> 说明：由于运算符 <code>-</code>  不能被应用于字符串，并且 <code>&quot;A&quot;</code> 和 <code>&quot;B&quot;</code> 都不能转换成数值，因此，<code>&quot;A&quot; - &quot;B&quot;</code>的结果是 <code>NaN</code>，然后再和字符串 <code>&quot;2&quot;</code> 连接，得到 <code>&quot;NaN2&quot;</code> 。</p> <p>例6： <code>&quot;A&quot; - &quot;B&quot; + 2</code> 输出： <code>NaN</code> 说明：参见前一个例子， <code>&quot;A&quot; - &quot;B&quot;</code> 结果为 <code>NaN</code>。但是，应用任何运算符到NaN与其他任何的数字运算对象，结果仍然是 <code>NaN</code>。</p> <h2 id="_21-下面的递归代码在数组列表偏大的情况下会导致堆栈溢出。在保留递归模式的基础上，你怎么解决这个问题？"><a href="#_21-下面的递归代码在数组列表偏大的情况下会导致堆栈溢出。在保留递归模式的基础上，你怎么解决这个问题？" aria-hidden="true" class="header-anchor">#</a> 21.下面的递归代码在数组列表偏大的情况下会导致堆栈溢出。在保留递归模式的基础上，你怎么解决这个问题？</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> list <span class="token operator">=</span> <span class="token function">readHugeList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> <span class="token function-variable function">nextListItem</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> item <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// process the list item...</span>
        <span class="token function">nextListItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>潜在的堆栈溢出可以通过修改<code>nextListItem</code> 函数避免：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> list <span class="token operator">=</span> <span class="token function">readHugeList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> <span class="token function-variable function">nextListItem</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> item <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// process the list item...</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span> nextListItem<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>堆栈溢出之所以会被消除，是因为事件循环操纵了递归，而不是调用堆栈。当 <code>nextListItem</code> 运行时，如果 <code>item</code>不为空，timeout函数（<code>nextListItem</code>）就会被推到事件队列，该函数退出，因此就清空调用堆栈。当事件队列运行其timeout事件，且进行到下一个 <code>item</code> 时，定时器被设置为再次调用 <code>nextListItem</code>。因此，该方法从头到尾都没有直接的递归调用，所以无论迭代次数的多少，调用堆栈保持清空的状态。</p> <h2 id="_22-javascript中的“闭包”是什么？请举一个例子。"><a href="#_22-javascript中的“闭包”是什么？请举一个例子。" aria-hidden="true" class="header-anchor">#</a> 22.JavaScript中的“闭包”是什么？请举一个例子。</h2> <p>闭包是一个可以访问外部（封闭）函数作用域链中的变量的内部函数。闭包可以访问三种范围中的变量：这三个范围具体为：（1）自己范围内的变量，（2）封闭函数范围内的变量，以及（3）全局变量。</p> <p>下面是一个简单的例子：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> globalVar <span class="token operator">=</span> <span class="token string">&quot;xyz&quot;</span><span class="token punctuation">;</span>

<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">outerFunc</span><span class="token punctuation">(</span><span class="token parameter">outerArg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> outerVar <span class="token operator">=</span> <span class="token string">'a'</span><span class="token punctuation">;</span>

  <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">innerFunc</span><span class="token punctuation">(</span><span class="token parameter">innerArg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> innerVar <span class="token operator">=</span> <span class="token string">'b'</span><span class="token punctuation">;</span>

    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
      <span class="token string">&quot;outerArg = &quot;</span> <span class="token operator">+</span> outerArg <span class="token operator">+</span> <span class="token string">&quot;\n&quot;</span> <span class="token operator">+</span>
      <span class="token string">&quot;innerArg = &quot;</span> <span class="token operator">+</span> innerArg <span class="token operator">+</span> <span class="token string">&quot;\n&quot;</span> <span class="token operator">+</span>
      <span class="token string">&quot;outerVar = &quot;</span> <span class="token operator">+</span> outerVar <span class="token operator">+</span> <span class="token string">&quot;\n&quot;</span> <span class="token operator">+</span>
      <span class="token string">&quot;innerVar = &quot;</span> <span class="token operator">+</span> innerVar <span class="token operator">+</span> <span class="token string">&quot;\n&quot;</span> <span class="token operator">+</span>
      <span class="token string">&quot;globalVar = &quot;</span> <span class="token operator">+</span> globalVar<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">456</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>在上面的例子中，来自于 <code>innerFunc</code>， <code>outerFunc</code>和全局命名空间的变量都在 <code>innerFunc</code>的范围内。因此，上面的代码将输出如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>outerArg <span class="token operator">=</span> <span class="token number">123</span>
innerArg <span class="token operator">=</span> <span class="token number">456</span>
outerVar <span class="token operator">=</span> a
innerVar <span class="token operator">=</span> b
globalVar <span class="token operator">=</span> xyz
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="_23-下面的代码将输出什么："><a href="#_23-下面的代码将输出什么：" aria-hidden="true" class="header-anchor">#</a> 23.下面的代码将输出什么：</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> i <span class="token operator">*</span> <span class="token number">1000</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>解释你的答案。闭包在这里能起什么作用？</p> <p>上面的代码不会按预期显示值0，1，2，3，和4，而是会显示5，5，5，5，和5。</p> <p>原因是，在循环中执行的每个函数将整个循环完成之后被执行，因此，将会引用存储在 <code>i</code>中的最后一个值，那就是5。</p> <p>闭包可以通过为每次迭代创建一个唯一的范围，存储范围内变量的每个唯一的值，来防止这个问题，如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    	<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> x <span class="token operator">*</span> <span class="token number">1000</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>这就会按预期输出0，1，2，3，和4到控制台。</p> <h2 id="_24-以下代码行将输出什么到控制台？"><a href="#_24-以下代码行将输出什么到控制台？" aria-hidden="true" class="header-anchor">#</a> 24.以下代码行将输出什么到控制台？</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;0 || 1 = &quot;</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token number">0</span> <span class="token operator">||</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;1 || 2 = &quot;</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">||</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;0 &amp;&amp; 1 = &quot;</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;1 &amp;&amp; 2 = &quot;</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">&amp;&amp;</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>并解释。</p> <p>该代码将输出：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token number">0</span> <span class="token operator">||</span> <span class="token number">1</span> <span class="token operator">=</span> <span class="token number">1</span>
<span class="token number">1</span> <span class="token operator">||</span> <span class="token number">2</span> <span class="token operator">=</span> <span class="token number">1</span>
<span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token number">1</span> <span class="token operator">=</span> <span class="token number">0</span>
<span class="token number">1</span> <span class="token operator">&amp;&amp;</span> <span class="token number">2</span> <span class="token operator">=</span> <span class="token number">2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>在JavaScript中， <code>||</code> 和 <code>&amp;&amp;</code>都是逻辑运算符，用于在从左至右计算时，返回第一个可完全确定的“逻辑值”。</p> <p>或（ <code>||</code> ）运算符。在形如 <code>X||Y</code>的表达式中，首先计算<code>X</code> 并将其解释执行为一个布尔值。如果这个布尔值<code>true</code>，那么返回<code>true</code>（1），不再计算 <code>Y</code>，因为“或”的条件已经满足。如果这个布尔值为<code>false</code>，那么我们仍然不能知道 <code>X||Y</code>是真是假，直到我们计算 <code>Y</code>，并且也把它解释执行为一个布尔值。</p> <p>因此， <code>0 || 1</code> 的计算结果为true（1），同理计算<code>1 || 2</code>。</p> <p>与（ <code>&amp;&amp;</code>）运算符。在形如 <code>X&amp;&amp;Y</code>的表达式中，首先计算 <code>X</code>并将其解释执行为一个布尔值。如果这个布尔值为 <code>false</code>，那么返回 <code>false</code>（0），不再计算 <code>Y</code>，因为“与”的条件已经失败。如果这个布尔值为<code>true</code>，但是，我们仍然不知道 <code>X&amp;&amp;Y</code> 是真是假，直到我们去计算 <code>Y</code>，并且也把它解释执行为一个布尔值。</p> <p>不过，**关于 <code>&amp;&amp;</code>运算符有趣的地方在于，当一个表达式计算为“true”的时候，那么就返回表达式本身。**这很好，虽然它在逻辑表达式方面计算为“真”，但如果你希望的话也可用于返回该值。这就解释了为什么，有些令人奇怪的是， <code>1 &amp;&amp; 2</code>返回 <code>2</code>（而不是你以为的可能返回 <code>true</code> 或 <code>1</code>）。</p> <h2 id="_25-以下代码将输出什么？并解释你的答案。"><a href="#_25-以下代码将输出什么？并解释你的答案。" aria-hidden="true" class="header-anchor">#</a> 25.以下代码将输出什么？并解释你的答案。</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> a<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    b<span class="token operator">=</span><span class="token punctuation">{</span>key<span class="token punctuation">:</span><span class="token string">'b'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    c<span class="token operator">=</span><span class="token punctuation">{</span>key<span class="token punctuation">:</span><span class="token string">'c'</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

a<span class="token punctuation">[</span>b<span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">123</span><span class="token punctuation">;</span>
a<span class="token punctuation">[</span>c<span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">456</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>b<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>这段代码将输出 <code>456</code>（而不是 <code>123</code>）。</p> <p>原因为：当设置对象属性时，JavaScript会暗中字符串化参数值。在这种情况下，由于 <code>b</code> 和 <code>c</code>都是对象，因此它们都将被转换为<code>&quot;[object Object]&quot;</code>。结果就是， <code>a[b]</code>和<code>a[c]</code>均相当于<code>a[&quot;[object Object]&quot;]</code> ，并可以互换使用。因此，设置或引用 <code>a[c]</code>和设置或引用 <code>a[b]</code>完全相同。</p> <h2 id="_26-下面的代码将输出什么到控制台，为什么："><a href="#_26-下面的代码将输出什么到控制台，为什么：" aria-hidden="true" class="header-anchor">#</a> 26.下面的代码将输出什么到控制台，为什么：</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> hero <span class="token operator">=</span> <span class="token punctuation">{</span>
    _name<span class="token punctuation">:</span> <span class="token string">'John Doe'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">getSecretIdentity</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> stoleSecretIdentity <span class="token operator">=</span> hero<span class="token punctuation">.</span>getSecretIdentity<span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">stoleSecretIdentity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>hero<span class="token punctuation">.</span><span class="token function">getSecretIdentity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>代码有什么问题，以及应该如何修复。</p> <p>代码将输出：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">undefined</span>
John Doe
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>第一个 <code>console.log</code>之所以输出 <code>undefined</code>，是因为我们正在从 <code>hero</code>对象提取方法，所以调用了全局上下文中（即窗口对象）的 <code>stoleSecretIdentity()</code>，而在此全局上下文中， <code>_name</code>属性不存在。</p> <p>其中一种修复<code>stoleSecretIdentity()</code> 函数的方法如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> stoleSecretIdentity <span class="token operator">=</span> hero<span class="token punctuation">.</span><span class="token function">getSecretIdentity</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>hero<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="_27-创建一个给定页面上的一个dom元素，就会去访问元素本身及其所有子元素（不只是它的直接子元素）的函数。对于每个被访问的元素，函数应该传递元素到提供的回调函数。"><a href="#_27-创建一个给定页面上的一个dom元素，就会去访问元素本身及其所有子元素（不只是它的直接子元素）的函数。对于每个被访问的元素，函数应该传递元素到提供的回调函数。" aria-hidden="true" class="header-anchor">#</a> 27.创建一个给定页面上的一个DOM元素，就会去访问元素本身及其所有子元素（不只是它的直接子元素）的函数。对于每个被访问的元素，函数应该传递元素到提供的回调函数。</h2> <p>此函数的参数为：</p> <ul><li>DOM元素</li> <li>回调函数（将DOM元素作为其参数）</li></ul> <p>访问树（DOM）的所有元素是经典的深度优先搜索算法应用。下面是一个示范的解决方案：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Traverse</span><span class="token punctuation">(</span><span class="token parameter">p_element<span class="token punctuation">,</span>p_callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token function">p_callback</span><span class="token punctuation">(</span>p_element<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">var</span> list <span class="token operator">=</span> p_element<span class="token punctuation">.</span>children<span class="token punctuation">;</span>
   <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> list<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token function">Traverse</span><span class="token punctuation">(</span>list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>p_callback<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// recursive call</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>下面转载自：
作者：刘小夕</p> <p>链接：https://juejin.im/post/5d124a12f265da1b9163a28d</p> <p>来源：掘金著作权归作者所有。</p> <h2 id="_28-new的实现原理是什么？"><a href="#_28-new的实现原理是什么？" aria-hidden="true" class="header-anchor">#</a> 28. new的实现原理是什么？</h2> <div class="tip custom-block"><p class="custom-block-title">`new` 的实现原理:</p> <ol><li>创建一个空对象，构造函数中的this指向这个空对象</li> <li>这个新对象被执行 [[原型]] 连接</li> <li>执行构造函数方法，属性和方法被添加到this引用的对象中</li> <li>如果构造函数中没有返回其它对象，那么返回this，即创建的这个的新对象，否则，返回构造函数中返回的对象。</li></ol></div> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">_new</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> target <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">//创建的新对象</span>
    <span class="token comment">//第一个参数是构造函数</span>
    <span class="token keyword">let</span> <span class="token punctuation">[</span>constructor<span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>arguments<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">//执行[[原型]]连接;target 是 constructor 的实例</span>
    target<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> constructor<span class="token punctuation">.</span>prototype<span class="token punctuation">;</span>
    <span class="token comment">//执行构造函数，将属性或方法添加到创建的空对象上</span>
    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token function">constructor</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">&quot;object&quot;</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> <span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">&quot;function&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//如果构造函数执行的结构返回的是一个对象，那么返回这个对象</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//如果构造函数返回的不是一个对象，返回创建的新对象</span>
    <span class="token keyword">return</span> target<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="_29-如何正确判断this的指向？"><a href="#_29-如何正确判断this的指向？" aria-hidden="true" class="header-anchor">#</a> 29. 如何正确判断this的指向？</h2> <p>如果用一句话说明 this 的指向，那么即是: 谁调用它，this 就指向谁。</p> <p>但是仅通过这句话，我们很多时候并不能准确判断 this 的指向。因此我们需要借助一些规则去帮助自己：</p> <p>this 的指向可以按照以下顺序判断:</p> <h4 id="全局环境中的-this"><a href="#全局环境中的-this" aria-hidden="true" class="header-anchor">#</a> 全局环境中的 this</h4> <p>浏览器环境：无论是否在严格模式下，在全局执行环境中（在任何函数体外部）this 都指向全局对象 <code>window</code>;</p> <p>node 环境：无论是否在严格模式下，在全局执行环境中（在任何函数体外部），this 都是空对象 <code>{}</code>;</p> <h4 id="是否是-new-绑定"><a href="#是否是-new-绑定" aria-hidden="true" class="header-anchor">#</a> 是否是 <code>new</code> 绑定</h4> <p>如果是 <code>new</code> 绑定，并且构造函数中没有返回 function 或者是 object，那么 this 指向这个新对象。如下:</p> <blockquote><p>构造函数返回值不是 function 或 object。<code>new Super()</code> 返回的是 this 对象。</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Super</span><span class="token punctuation">(</span><span class="token parameter">age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Super</span><span class="token punctuation">(</span><span class="token string">'26'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>instance<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//26</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><blockquote><p>构造函数返回值是 function 或 object，<code>new Super()</code>是返回的是Super种返回的对象。</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Super</span><span class="token punctuation">(</span><span class="token parameter">age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
    <span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>a<span class="token punctuation">:</span> <span class="token string">'2'</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Super</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>instance<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//{ a: '2' }</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>instance<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//undefined</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="函数是否通过-call-apply-调用，或者使用了-bind-绑定，如果是，那么this绑定的就是指定的对象【归结为显式绑定】。"><a href="#函数是否通过-call-apply-调用，或者使用了-bind-绑定，如果是，那么this绑定的就是指定的对象【归结为显式绑定】。" aria-hidden="true" class="header-anchor">#</a> 函数是否通过 call,apply 调用，或者使用了 bind 绑定，如果是，那么this绑定的就是指定的对象【归结为显式绑定】。</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">info</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
    age<span class="token punctuation">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
    info
<span class="token punctuation">}</span>
<span class="token keyword">var</span> age <span class="token operator">=</span> <span class="token number">28</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> info <span class="token operator">=</span> person<span class="token punctuation">.</span>info<span class="token punctuation">;</span>
<span class="token function">info</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//20</span>
<span class="token function">info</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//20</span>
<span class="token function">info</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//20</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>这里同样需要注意一种<strong>特殊</strong>情况，如果 call,apply 或者 bind 传入的第一个参数值是 <code>undefined</code> 或者 <code>null</code>，严格模式下 this 的值为传入的值 null /undefined。非严格模式下，实际应用的默认绑定规则，this 指向全局对象(node环境为global，浏览器环境为window)</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">info</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//node环境中:非严格模式 global，严格模式为null</span>
    <span class="token comment">//浏览器环境中:非严格模式 window，严格模式为null</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
    age<span class="token punctuation">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
    info
<span class="token punctuation">}</span>
<span class="token keyword">var</span> age <span class="token operator">=</span> <span class="token number">28</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> info <span class="token operator">=</span> person<span class="token punctuation">.</span>info<span class="token punctuation">;</span>
<span class="token comment">//严格模式抛出错误；</span>
<span class="token comment">//非严格模式，node下输出undefined（因为全局的age不会挂在 global 上）</span>
<span class="token comment">//非严格模式。浏览器环境下输出 28（因为全局的age会挂在 window 上）</span>
<span class="token function">info</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h4 id="隐式绑定，函数的调用是在某个对象上触发的，即调用位置上存在上下文对象。典型的隐式调用为-xxx-fn"><a href="#隐式绑定，函数的调用是在某个对象上触发的，即调用位置上存在上下文对象。典型的隐式调用为-xxx-fn" aria-hidden="true" class="header-anchor">#</a> 隐式绑定，函数的调用是在某个对象上触发的，即调用位置上存在上下文对象。典型的隐式调用为: <code>xxx.fn()</code></h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">info</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
    age<span class="token punctuation">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
    info
<span class="token punctuation">}</span>
<span class="token keyword">var</span> age <span class="token operator">=</span> <span class="token number">28</span><span class="token punctuation">;</span>
person<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//20;执行的是隐式绑定</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="默认绑定，在不能应用其它绑定规则时使用的默认规则，通常是独立函数调用。"><a href="#默认绑定，在不能应用其它绑定规则时使用的默认规则，通常是独立函数调用。" aria-hidden="true" class="header-anchor">#</a> 默认绑定，在不能应用其它绑定规则时使用的默认规则，通常是独立函数调用。</h4> <p>非严格模式： node环境，执行全局对象 global，浏览器环境，执行全局对象 window。</p> <p>严格模式：执行 undefined</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">info</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> age <span class="token operator">=</span> <span class="token number">28</span><span class="token punctuation">;</span>
<span class="token comment">//严格模式；抛错</span>
<span class="token comment">//非严格模式，node下输出 undefined（因为全局的age不会挂在 global 上）</span>
<span class="token comment">//非严格模式。浏览器环境下输出 28（因为全局的age会挂在 window 上）</span>
<span class="token comment">//严格模式抛出，因为 this 此时是 undefined</span>
<span class="token function">info</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="箭头函数的情况："><a href="#箭头函数的情况：" aria-hidden="true" class="header-anchor">#</a> 箭头函数的情况：</h4> <p>箭头函数没有自己的this，继承外层上下文绑定的this。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    age<span class="token punctuation">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
    <span class="token function-variable function">info</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//this继承的是外层上下文绑定的this</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>age<span class="token punctuation">:</span> <span class="token number">28</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> info <span class="token operator">=</span> obj<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">info</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//20</span>

<span class="token keyword">let</span> info2 <span class="token operator">=</span> obj<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">info2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//28</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="_30-实现一个深拷贝"><a href="#_30-实现一个深拷贝" aria-hidden="true" class="header-anchor">#</a> 30.实现一个深拷贝</h2> <h4 id="深拷贝实现"><a href="#深拷贝实现" aria-hidden="true" class="header-anchor">#</a> 深拷贝实现</h4> <blockquote><p>1.深拷贝最简单的实现是: <code>JSON.parse(JSON.stringify(obj))</code></p></blockquote> <p><code>JSON.parse(JSON.stringify(obj))</code> 是最简单的实现方式，但是有一些缺陷：</p> <ol><li>对象的属性值是函数时，无法拷贝。</li> <li>原型链上的属性无法拷贝</li> <li>不能正确的处理 Date 类型的数据</li> <li>不能处理 RegExp</li> <li>会忽略 symbol</li> <li>会忽略 undefined</li></ol> <blockquote><p>2.实现一个 deepClone 函数</p></blockquote> <ol><li>如果是基本数据类型，直接返回</li> <li>如果是 <code>RegExp</code> 或者 <code>Date</code> 类型，返回对应类型</li> <li>如果是复杂数据类型，递归。</li> <li>考虑循环引用的问题</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">deepClone</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> hash <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//递归拷贝</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">RegExp</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">Date</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> obj <span class="token operator">!==</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//如果不是复杂数据类型，直接返回</span>
        <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>hash<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> hash<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">/**
     * 如果obj是数组，那么 obj.constructor 是 [Function: Array]
     * 如果obj是对象，那么 obj.constructor 是 [Function: Object]
     */</span>
    <span class="token keyword">let</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">obj<span class="token punctuation">.</span>constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    hash<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> t<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//递归</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//是否是自身的属性</span>
            t<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">deepClone</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> hash<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> t<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/app.df7a5572.js" defer></script><script src="/assets/js/20.edd41887.js" defer></script>
  </body>
</html>
